
> clarion-extensions@0.8.4 test
> npm run test:server


> clarion-extensions@0.8.4 test:server
> mocha

[2026-01-05T18:35:14.163Z] [BuiltinFunctionService] Ôä╣´©Å INFO: Loading built-in functions from: F:\github\Clarion-Extension\Clarion-Extension\out\server\src\data\clarion-builtins.json
[2026-01-05T18:35:14.164Z] [BuiltinFunctionService] Ôä╣´©Å INFO: Ô£à Loaded 106 built-in function(s)


  AttributeKeywords Tests
    isAttributeKeyword()
      Ô£ö Should recognize calling convention attributes
      Ô£ö Should recognize calling conventions in mixed case
      Ô£ö Should recognize access modifiers
      Ô£ö Should recognize method modifiers
      Ô£ö Should recognize data structure attributes
      Ô£ö Should recognize common modifiers
      Ô£ö Should recognize other attributes
      Ô£ö Should NOT recognize data type keywords as attributes
      Ô£ö Should NOT recognize SIZE as an attribute
      Ô£ö Should NOT recognize structure keywords as attributes
      Ô£ö Should NOT recognize control flow keywords as attributes
      Ô£ö Should NOT recognize random strings as attributes
    getAttributeKeywords()
      Ô£ö Should return an array of keywords
      Ô£ö All returned keywords should be uppercase
      Ô£ö Should extract keywords from tokenizer pattern
    Real-world Examples
      Ô£ö Should correctly identify attributes in method declaration
      Ô£ö Should correctly identify attributes in MAP procedure
      Ô£ö Should correctly identify attributes in data declaration
      Ô£ö Should correctly identify attributes with OVER and DIM
      Ô£ö Should correctly identify AUTO and STATIC modifiers
      Ô£ö Should correctly identify EQUATE and LIKE
      Ô£ö Should NOT identify SIZE as attribute in DIM(SIZE()) context
      Ô£ö Should correctly identify type modifiers are NOT attributes
      Ô£ö Should correctly identify calling conventions in complex signatures

  BuiltinFunctionService
    Ô£ö getInstance returns same instance (singleton)
    Ô£ö loads without errors
    Ô£ö isBuiltin returns false for unknown function
    Ô£ö getSignatures returns empty array for unknown function
    Ô£ö getAllBuiltinNames returns array
    Ô£ö getBuiltinCount returns non-negative number

  Clarion Dot-as-END Legacy Syntax Tests
    Single-line IF with dot terminator
      Ô£ö Should parse IF condition with dot on same line
      Ô£ö Should parse IF-THEN-statement on same line with dot
    Multi-line IF with dot terminator
      Ô£ö Should parse IF with statement on next line and dot terminator
      Ô£ö Should parse IF with dot terminator on separate line
      Ô£ö Should parse IF with multiple statements before dot
    LOOP with dot terminator
      Ô£ö Should parse LOOP with dot terminator instead of END
      Ô£ö Should parse nested LOOP with dot terminators
    CASE structure with dot terminator
      Ô£ö Should parse CASE with dot terminator
      Ô£ö Should parse CASE OF clause with dot on separate line
    IF-ELSE with dot terminators
      Ô£ö Should parse IF-ELSE both with dot terminators
    Mixed dot and END terminators
      Ô£ö Should parse structure with both dot and END terminators
    Folding with dot terminators
      Ô£ö Should create folding range for IF with dot terminator
    Edge cases with dots
      Ô£ö Should distinguish dot terminator from decimal point
      Ô£ö Should handle dot terminator after parentheses
      Ô£ö Should handle dot terminator in nested structures
      Ô£ö Should handle empty statement with just dot
    Semicolon for multiple statements on one line
      Ô£ö Should parse two statements on one line with semicolon
      Ô£ö Should parse three statements on one line with semicolons
      Ô£ö Should parse statements without semicolon on separate lines
      Ô£ö Should parse IF-THEN with multiple statements and semicolon
      Ô£ö Should parse LOOP with semicolon-separated statements
      Ô£ö Should parse function calls with semicolons on one line
      Ô£ö Should parse mixed semicolons and newlines
      Ô£ö Should distinguish semicolon from string literal containing semicolon
      Ô£ö Should parse semicolon with dot terminator
      Ô£ö Should handle trailing semicolon (no statement after)
    Invalid syntax - dot without THEN should NOT work as terminator
      Ô£ö Should NOT accept dot as terminator when THEN is missing
      Ô£ö Should NOT accept dot terminator for IF without THEN keyword
      Ô£ö Should NOT accept dot for LOOP without proper structure
      Ô£ö Valid THEN with dot should work
      Ô£ö Dot in expression should not be statement terminator

  ClarionFoldingProvider Tests
    computeFoldingRanges - Procedures
      Ô£ö Should create folding range for simple PROCEDURE
      Ô£ö Should create folding range for PROCEDURE with DATA section
      Ô£ö Should handle nested ROUTINE within PROCEDURE
      Ô£ö Should handle multiple PROCEDUREs
    computeFoldingRanges - Structures
      Ô£ö Should create folding range for QUEUE structure
      Ô£ö Should create folding range for GROUP structure
      Ô£ö Should create folding range for CLASS
    computeFoldingRanges - Regions
      Ô£ö Should create folding range for !REGION comments
      Ô£ö Should handle multiple !REGION blocks
      Ô£ö Should handle nested regions
    computeFoldingRanges - Edge Cases
      Ô£ö Should handle empty code
      Ô£ö Should handle code with only comments
      Ô£ö Should handle PROCEDURE without END
      Ô£ö Should handle complex nested structure
    computeFoldingRanges - Method Implementations
      Ô£ö Should fold method implementations (ThisWindow.Init)
      Ô£ö Should handle multiple method implementations
    computeFoldingRanges - Control Flow (IF/ELSE/ELSIF)
      Ô£ö Should fold IF with ELSE correctly
      Ô£ö Should fold nested IF structures correctly
      Ô£ö Should fold IF with ELSIF correctly
      Ô£ö Should fold IF without ELSE correctly
      Ô£ö Should NOT fold single-line IF with period terminator
      Ô£ö Should NOT fold single-line IF with END terminator

  TEST_CLARION_SYNTAX.clw Validation Tests
    TestProc1: Single-line IF with dot terminator
      Ô£ö Should have procedure name at column 0
      Ô£ö Should have all variables at column 0
      Ô£ö Should not contain DATA keyword
      Ô£ö Should have all data declarations before CODE
      Ô£ö Should terminate IF with dot
      Ô£ö Should not have END for procedure
      Ô£ö Should successfully tokenize
    TestProc5: IF-ELSIF-ELSE with single dot terminator
      Ô£ö Should have only ONE dot terminator for entire IF/ELSIF/ELSE structure
      Ô£ö Should not have dots after ELSIF or ELSE clauses
      Ô£ö Should successfully tokenize IF/ELSIF/ELSE with single dot
    TestProc13: GROUP with END keyword - EXPECTED TO FAIL
      Ô£ö Should detect END at column 0 (invalid per KB)
      Ô£ö Should fail validation: END must be indented
    TestProc14: IF with END on same line (space separator)
      Ô£ö Should allow END after statement with space (no semicolon)
      Ô£ö Should successfully tokenize IF with END on same line
    TestProc16: Two statements on one line with semicolon
      Ô£ö Should require semicolon for multiple statements on one line
      Ô£ö Should not allow space-only separation
      Ô£ö Should successfully tokenize statements with semicolon
    TestProc20: ROUTINE with and without DATA section
      Ô£ö Should have ROUTINE label at column 0
      Ô£ö MyRoutine should have DATA and CODE keywords at column 0
      Ô£ö SimpleRoutine should not have DATA section
      Ô£ö Should not have explicit EXIT statements
      Ô£ö Should successfully tokenize ROUTINEs
    Column 0 Rules Validation
      Ô£ö PROGRAM should be indented (not at column 0)
      Ô£ö MAP should be indented (not at column 0)
      Ô£ö END should be indented (not at column 0)
      Ô£ö Procedure labels must be at column 0
      Ô£ö Variable labels must be at column 0
    Procedure Structure Validation
      Ô£ö Procedures should not have END statement
      Ô£ö Procedures should not have DATA keyword
      Ô£ö All data declarations should be before CODE

  ClarionTokenizer Tests
    Ô£ö Should tokenize a simple PROCEDURE
    Ô£ö Should tokenize comments
    Ô£ö Should tokenize string literals
    Ô£ö Should tokenize labels with colons
    Ô£ö Should handle empty input
    Ô£ö Should tokenize ROUTINE
    Ô£ö Should tokenize structure fields
    Ô£ö Should NOT treat keywords after colons as keywords (nts:case)
    Ô£ö Should NOT treat keywords after colons as keywords (nts:record)
    Ô£ö Should NOT treat keywords after colons as keywords (obj:end, obj:if, obj:loop)
    Ô£ö Should still recognize actual keywords when not qualified
    Ô£ö Should NOT treat keywords after periods as keywords (object.case)

  ClassDefinitionIndexer Tests

­ƒöº Setting up ClassDefinitionIndexer tests...
Ô£à ServerSettings configured
   ­ƒôé Redirection file: Clarion111.RED
   ­ƒôé Primary redirection path: C:\Clarion\Clarion11.1\bin
   ­ƒôé Libsrc paths: 2 paths
­ƒôé Test solution path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\RealWorldTestSuite.sln
­ƒöä Loading solution...
Ô£à Solution loaded with 1 project(s)
    Phase 1: Index Building
   ­ƒôé Project path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite
   Ô£à Index created with 852 unique class names
      Ô£ö Should build index from redirection paths (51ms)
   Ô£à Found StringTheory at: C:\Clarion\Clarion11.1\accessory\libsrc\win\StringTheory.inc:361
      Ô£ö Should find StringTheory class in index (45ms)
   ÔÅ▒´©Å  Index built in 40ms
   ­ƒôè Found 852 unique class names
   ­ƒôª Total definitions: 857
      Ô£ö Should complete index build in reasonable time (<5 seconds) (40ms)
    Phase 2: Class Definition Lookup
      - Should find class definition by name (case-insensitive)
      - Should return null for non-existent class
      - Should handle classes with multiple definitions
    Phase 3: Performance & Caching
      - Should cache index and reuse on subsequent calls
      - Should handle different projects with different redirection files
    Phase 4: Edge Cases
      - Should handle files with multiple class definitions
      - Should correctly parse CLASS with attributes
      - Should handle invalid or missing redirection files gracefully
­ƒº╣ Cleaning up ClassDefinitionIndexer tests...

  Cross-File Scope Analysis
    TEST 7: MAP INCLUDE - Module-Local Procedure Declarations
[2026-01-05T18:35:14.556Z] [DataTypeService] Ôä╣´©Å INFO: Loaded 31 Clarion data types
      Ô£ö Real files exist in test suite
      Ô£ö MAP should be detected in utils.clw
[2026-01-05T18:35:14.559Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 58:4 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.559Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 58:4
[2026-01-05T18:35:14.559Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "StartProc" at position
[2026-01-05T18:35:14.560Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.560Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Detected procedure call: StartProc()
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: StartProc
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 94
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 39, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "utils.clw"
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 39, finishesAt 41
[2026-01-05T18:35:14.560Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 39 (including INCLUDEs)...
[2026-01-05T18:35:14.561Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 19 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.561Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Token found in INCLUDE file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.561Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: StartProc              PROCEDURE(string pProcNumber)    !Start a Procedure in a new thread
[2026-01-05T18:35:14.561Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Source: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.561Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for StartProc at line 1
[2026-01-05T18:35:14.561Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Location: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.561Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration found: true
[2026-01-05T18:35:14.561Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP from INCLUDE: true, mapUri: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.561Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration is from INCLUDE file: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of StartProc from position 1
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 1 is not inside a MAP block - checking if this is an INCLUDE file
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE block(s) with referencedFile in this file
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Checking MODULE('STARTPROC.CLW') at line 0, finishesAt 2
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position 1 is within MODULE block - this is an INCLUDE file
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position is on procedure declaration StartProc, searching in MODULE file STARTPROC.CLW
[2026-01-05T18:35:14.562Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('STARTPROC.CLW') returned: null
[2026-01-05T18:35:14.563Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.563Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.563Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure StartProc implementation at line 12
[2026-01-05T18:35:14.563Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure StartProc
[2026-01-05T18:35:14.563Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in STARTPROC.CLW, searching for procedure declaration
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found procedure StartProc declaration in MAP at line 1
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Procedure is in MODULE('STARTPROC.CLW')
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôä MODULE references a CLW file, searching for direct implementation
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Procedure not in a MODULE block, searching for direct implementation
[2026-01-05T18:35:14.564Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found implementation in MODULE file at line 12
[2026-01-05T18:35:14.564Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Final result: mapDecl=true, procImpl=true
[2026-01-05T18:35:14.564Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="StartProc", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.565Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=false, isAtImplementation=false
[2026-01-05T18:35:14.565Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=false
[2026-01-05T18:35:14.565Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.565Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/STARTPROC.CLW
[2026-01-05T18:35:14.565Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Implementation starts at line 12
[2026-01-05T18:35:14.565Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Adding implementation preview with 2 lines
Ô£à Hover worked! Content: [object Object]
      Ô£ö Hover on StartProc() in utils.clw should work with MAP INCLUDE
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of StartProc from position 1
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 1 is not inside a MAP block - checking if this is an INCLUDE file
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE block(s) with referencedFile in this file
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Checking MODULE('STARTPROC.CLW') at line 0, finishesAt 2
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position 1 is within MODULE block - this is an INCLUDE file
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position is on procedure declaration StartProc, searching in MODULE file STARTPROC.CLW
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('STARTPROC.CLW') returned: null
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure StartProc implementation at line 12
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure StartProc
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.566Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in STARTPROC.CLW, searching for procedure declaration
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found procedure StartProc declaration in MAP at line 1
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Procedure is in MODULE('STARTPROC.CLW')
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôä MODULE references a CLW file, searching for direct implementation
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Procedure not in a MODULE block, searching for direct implementation
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found implementation in MODULE file at line 12
Ô£à Implementation found at: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/STARTPROC.CLW
      Ô£ö Ctrl+F12 on StartProc declaration in startproc.inc should find implementation
[2026-01-05T18:35:14.567Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 53:10 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.567Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 53:10
[2026-01-05T18:35:14.567Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "StartProc" at position
[2026-01-05T18:35:14.567Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.567Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Detected procedure reference in START(): StartProc()
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: StartProc
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 94
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 39, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "utils.clw"
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 39, finishesAt 41
[2026-01-05T18:35:14.567Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 39 (including INCLUDEs)...
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 19 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Token found in INCLUDE file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: StartProc              PROCEDURE(string pProcNumber)    !Start a Procedure in a new thread
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Source: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for StartProc at line 1
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Location: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.568Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration found: true
[2026-01-05T18:35:14.568Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP from INCLUDE: true, mapUri: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.568Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration is from INCLUDE file: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of StartProc from position 1
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 1 is not inside a MAP block - checking if this is an INCLUDE file
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE block(s) with referencedFile in this file
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Checking MODULE('STARTPROC.CLW') at line 0, finishesAt 2
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position 1 is within MODULE block - this is an INCLUDE file
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position is on procedure declaration StartProc, searching in MODULE file STARTPROC.CLW
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('STARTPROC.CLW') returned: null
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure StartProc implementation at line 12
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure StartProc
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.568Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in STARTPROC.CLW, searching for procedure declaration
[2026-01-05T18:35:14.569Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.569Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found procedure StartProc declaration in MAP at line 1
[2026-01-05T18:35:14.569Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Procedure is in MODULE('STARTPROC.CLW')
[2026-01-05T18:35:14.569Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôä MODULE references a CLW file, searching for direct implementation
[2026-01-05T18:35:14.569Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Procedure not in a MODULE block, searching for direct implementation
[2026-01-05T18:35:14.569Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found implementation in MODULE file at line 12
[2026-01-05T18:35:14.569Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Final result: mapDecl=true, procImpl=true
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="StartProc", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=false, isAtImplementation=false
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=false
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/STARTPROC.CLW
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Implementation starts at line 12
[2026-01-05T18:35:14.569Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Adding implementation preview with 2 lines
Ô£à Hover worked for START(StartProc)! Content: [object Object]
      Ô£ö Hover on StartProc inside START() call should work
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: StartProc
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 94
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 39, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "utils.clw"
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 39, finishesAt 41
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 39 (including INCLUDEs)...
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 19 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Token found in INCLUDE file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: StartProc              PROCEDURE(string pProcNumber)    !Start a Procedure in a new thread
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Source: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for StartProc at line 1
[2026-01-05T18:35:14.570Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Location: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
Ô£à F12 worked for START(StartProc)! Found definition at: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
      Ô£ö F12 on StartProc inside START() call should go to definition
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: StartProc
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 94
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 39, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "utils.clw"
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 39, finishesAt 41
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 39 (including INCLUDEs)...
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 19 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Token found in INCLUDE file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: StartProc              PROCEDURE(string pProcNumber)    !Start a Procedure in a new thread
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Source: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\startproc.inc
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for StartProc at line 1
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôü Location: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/startproc.inc
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of StartProc from position 1
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 1 is not inside a MAP block - checking if this is an INCLUDE file
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE block(s) with referencedFile in this file
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Checking MODULE('STARTPROC.CLW') at line 0, finishesAt 2
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position 1 is within MODULE block - this is an INCLUDE file
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Position is on procedure declaration StartProc, searching in MODULE file STARTPROC.CLW
[2026-01-05T18:35:14.571Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('STARTPROC.CLW') returned: null
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\STARTPROC.CLW
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure StartProc implementation at line 12
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure StartProc
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in STARTPROC.CLW, searching for procedure declaration
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found procedure StartProc declaration in MAP at line 1
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Procedure is in MODULE('STARTPROC.CLW')
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôä MODULE references a CLW file, searching for direct implementation
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Procedure not in a MODULE block, searching for direct implementation
[2026-01-05T18:35:14.572Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found implementation in MODULE file at line 12
Ô£à Ctrl+F12 worked for START(StartProc)! Found implementation at: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/STARTPROC.CLW
      Ô£ö Ctrl+F12 on StartProc inside START() call should go to implementation

  DefinitionProvider Behavior Tests
    Word Extraction for Goto Definition
      Ô£ö Should extract method name from self.Method() call
      Ô£ö Should extract prefixed variable (LOC:Counter)
      Ô£ö Should extract procedure name from call
      Ô£ö Should extract structure field (MyQueue.Name)
      Ô£ö Should extract DO routine target
    Symbol Detection in Token Stream
      Ô£ö Should detect local variable declaration
      Ô£ö Should detect PROCEDURE declaration
      Ô£ö Should detect ROUTINE declaration
      Ô£ö Should detect CLASS method declaration
      Ô£ö Should detect QUEUE structure with fields
    Scope Detection for Definition Search
      Ô£ö Should find innermost procedure scope
      Ô£ö Should find routine scope within procedure
    Method Implementation Pattern Detection
      Ô£ö Should detect method implementation pattern
      Ô£ö Should detect method implementation with parameters
    Self Method Call Pattern Detection
      Ô£ö Should detect self.Method() pattern
      Ô£ö Should detect self.Method with parameters
    ­ƒöÆ Behavior Lock: Local Variable Navigation
      - Should navigate to local variable declaration
      - Should navigate to prefixed variable (LOC:Field)
      - Should navigate to procedure parameter
    ­ƒöÆ Behavior Lock: Structure Navigation
      - Should navigate to QUEUE definition
      - Should navigate to structure field via dot notation
      - Should navigate to structure field via prefix notation
    ­ƒöÆ Behavior Lock: Class Method Navigation
      - Should navigate from method implementation to CLASS declaration (same file)
      - Should navigate from self.Method() call to declaration
      - Should handle method overloads with parameter counting
    ­ƒöÆ Behavior Lock: Routine Navigation
      - Should navigate to ROUTINE declaration
      - Should handle routine-local variables
    ­ƒÜ¿ Gap Coverage: MAP Procedure Forward Navigation (Declaration ÔåÆ Implementation)
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: ProcessOrder
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 17
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: ProcessOrder(LONG orderId)
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for ProcessOrder at line 2
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ProcessOrder from position 2
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 2 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 5 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 5: ProcessOrder PROCEDURE(LONG orderId)
[2026-01-05T18:35:14.575Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for ProcessOrder at line 5
      Ô£ö F12 on MAP declaration should jump to PROCEDURE implementation
[2026-01-05T18:35:14.576Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: ProcessOrder
[2026-01-05T18:35:14.576Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 label tokens for ProcessOrder
[2026-01-05T18:35:14.576Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Checking all 1 label tokens for non-structure-field matches
[2026-01-05T18:35:14.576Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 5
      Ô£ö Should handle MAP with PROCEDURE keyword
[2026-01-05T18:35:14.577Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: ProcessOrder
[2026-01-05T18:35:14.577Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 label tokens for ProcessOrder
[2026-01-05T18:35:14.577Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Checking all 1 label tokens for non-structure-field matches
[2026-01-05T18:35:14.577Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 5
      Ô£ö Should handle MAP with comma syntax
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: SaveRecord
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 28
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 11 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: SaveRecord(STRING fileName, LONG recordId, *STRING result)
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for SaveRecord at line 2
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of SaveRecord from position 2
[2026-01-05T18:35:14.577Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 2 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 11 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 5: SaveRecord PROCEDURE(STRING fileName, LONG recordId, *STRING result)
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for SaveRecord at line 5
      Ô£ö Should handle multi-parameter MAP procedures
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: SecondProc
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 27
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 2 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #2: line 5, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 2 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #2: line 5, finishesAt 7
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 3 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 5 (including INCLUDEs)...
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 6: SecondProc(LONG id)
[2026-01-05T18:35:14.578Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for SecondProc at line 6
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of SecondProc from position 6
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 6 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 5 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 13: SecondProc PROCEDURE(LONG id)
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for SecondProc at line 13
      Ô£ö Should handle multiple MAP blocks
    ­ƒÜ¿ Gap Coverage: MAP Procedure Reverse Navigation (Implementation ÔåÆ Declaration)
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: ProcessOrder
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 17
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: ProcessOrder(LONG orderId)
[2026-01-05T18:35:14.579Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for ProcessOrder at line 2
      Ô£ö F12 on PROCEDURE implementation should jump to MAP declaration
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: Utility
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 17
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: Utility(STRING text)
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for Utility at line 2
      Ô£ö Should prioritize MAP declaration over global procedure
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: PROCEDURE
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 12
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 3 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.580Z] [MapProcedureResolver] Ôä╣´©Å INFO: No MAP declaration found for PROCEDURE
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: MyProc
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 12
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 3 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: MyProc()
[2026-01-05T18:35:14.581Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for MyProc at line 2
      Ô£ö Should handle cursor on PROCEDURE keyword
    ­ƒÜ¿ Gap Coverage: MAP Edge Cases
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: GetValue
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 18
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: GetValue(),LONG
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for GetValue at line 2
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of GetValue from position 2
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 2 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 5 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 5: GetValue PROCEDURE(),LONG
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for GetValue at line 5
      Ô£ö Should handle MAP procedure with return type
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: ExternalProc
[2026-01-05T18:35:14.582Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 21
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 5
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 10 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 3: ExternalProc(LONG id)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for ExternalProc at line 3
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ExternalProc from position 3
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 3 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 10 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE blocks in MAP
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MODULE('EXTERNAL') found at line 2
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found procedure ExternalProc in MODULE block, searching external file
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('EXTERNAL') returned: null
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔØî Could not resolve MODULE file: EXTERNAL
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No implementation found in MODULE file
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 7: ExternalProc PROCEDURE(LONG id)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for ExternalProc at line 7
      Ô£ö Should handle MAP with MODULE declaration
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: HelperProc
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 16
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 1, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 1, finishesAt 3
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 1 (including INCLUDEs)...
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: HelperProc(STRING text)
[2026-01-05T18:35:14.583Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for HelperProc at line 2
      Ô£ö Should handle indented PROCEDURE implementation
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: Process
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 23
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 5, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 5, finishesAt 7
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 5 (including INCLUDEs)...
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 6: Process(LONG id)
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for Process at line 6
      Ô£ö Should not confuse MAP procedure with CLASS method
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: LocalHelper
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 23
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 3, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 3, finishesAt 5
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 3 (including INCLUDEs)...
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 4: LocalHelper(STRING text)
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for LocalHelper at line 4
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of LocalHelper from position 4
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 4 is inside PROCEDURE/PROGRAM block. Found 1 blocks containing this position
[2026-01-05T18:35:14.584Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 4 is inside a PROCEDURE/ROUTINE/PROGRAM block (line 0-6), not a MAP declaration
      Ô£ö Should handle MAP inside SECTION/ROUTINE
    ­ƒöÆ Behavior Lock: Cross-File Navigation (Already Working)
      - Should handle INCLUDE file references
    Scope-Aware Definition Tests
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: ProcLocal
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 label tokens for ProcLocal
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Current scope: PROCEDURE (2-6)
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 labels in current scope
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 3
      Ô£ö Should prioritize procedure-local over global with same name
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: LocalVar
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 label tokens for LocalVar
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Current scope: PROCEDURE (11-13)
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Checking all 1 label tokens for non-structure-field matches
[2026-01-05T18:35:14.585Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 7
      1) Should isolate variables in different procedures
[2026-01-05T18:35:14.586Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: ProcVar
[2026-01-05T18:35:14.586Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 label tokens for ProcVar
[2026-01-05T18:35:14.586Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Current scope: ROUTINE (5-8)
[2026-01-05T18:35:14.586Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Checking all 1 label tokens for non-structure-field matches
[2026-01-05T18:35:14.586Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 1
      Ô£ö Should allow routine to access procedure-local variable
      Ô£ö Should isolate routine-local from procedure code
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: ModuleVar
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 1 label tokens for ModuleVar
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Current scope: PROCEDURE (4-7)
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Checking all 1 label tokens for non-structure-field matches
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 2
      Ô£ö Should handle module-local scope in MEMBER file
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: Counter
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 4 label tokens for Counter
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Current scope: ROUTINE (7-12)
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Found 2 labels in current scope
[2026-01-05T18:35:14.587Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Returning label at line 9
      Ô£ö Should handle nested scopes with shadowing

  DiagnosticProvider - TDD Tests
    Unterminated IF Statements
      Ô£ö Should detect IF without any terminator
      Ô£ö Should NOT flag IF with dot terminator
      Ô£ö Should NOT flag IF with END terminator
      Ô£ö Should NOT flag single-line IF with dot
      Ô£ö Should detect unterminated IF before RETURN
    IF/ELSIF/ELSE Structure
      Ô£ö Should NOT flag IF/ELSIF/ELSE with single terminator
      Ô£ö Should detect unterminated IF/ELSIF/ELSE
      Ô£ö Should NOT flag IF-ELSE with single-line ELSE statements
    Unterminated LOOP Statements
      Ô£ö Should detect LOOP without terminator
      Ô£ö Should NOT flag LOOP with dot terminator
      Ô£ö Should NOT flag LOOP with END terminator
      Ô£ö Should NOT flag LOOP with WHILE terminator
      Ô£ö Should NOT flag LOOP with UNTIL terminator
      Ô£ö Should NOT flag FOR-style LOOP with WHILE terminator
      Ô£ö Should NOT flag nested LOOP with WHILE in outer loop
    Unterminated CASE Statements
      Ô£ö Should detect CASE without terminator
      Ô£ö Should NOT flag CASE with dot terminator
      Ô£ö Should NOT flag CASE with END terminator
    Unterminated Data Structures
      Ô£ö Should detect unterminated GROUP
      Ô£ö Should NOT flag GROUP with END terminator
      Ô£ö Should NOT flag GROUP with dot terminator
      Ô£ö Should detect unterminated QUEUE
      Ô£ö Should detect unterminated RECORD
    Nested Structures
      Ô£ö Should detect unterminated inner IF in nested structure
      Ô£ö Should NOT flag properly nested structures
      Ô£ö Should detect unterminated LOOP inside IF
    Structures That Should NOT Require Terminators
      Ô£ö Should NOT flag PROCEDURE without END
      Ô£ö Should NOT flag ROUTINE without END
      Ô£ö Should NOT flag ELSIF without separate terminator
    Multiple Errors
      Ô£ö Should detect multiple unterminated structures
      Ô£ö Should detect all errors in complex nested code
    Edge Cases
      Ô£ö Should handle empty procedure
      Ô£ö Should handle procedure with only data declarations
      Ô£ö Should handle IF at end of file
    Real-World Examples
      Ô£ö Should NOT flag StringTheory method with nested IF/ELSE
    MODULE Termination Rules
      Ô£ö Should detect unterminated MODULE inside MAP
      Ô£ö Should NOT flag MODULE with END inside MAP
      Ô£ö Should handle nested MAP with MODULE
    CLASS Definitions
      Ô£ö Should NOT flag CLASS with END terminator
      Ô£ö Should detect CLASS without terminator
      Ô£ö Should handle CLASS with MODULE attribute
    OMIT/COMPILE Blocks
      Ô£ö Should detect OMIT without terminator
      Ô£ö Should NOT flag OMIT with terminator on its own line
      Ô£ö Should NOT flag OMIT with terminator in comment
      Ô£ö Should NOT flag OMIT with terminator after code on same line
      Ô£ö Should detect OMIT with wrong case terminator
      Ô£ö Should detect COMPILE without terminator
      Ô£ö Should NOT flag COMPILE with terminator
      Ô£ö Should handle nested OMIT/COMPILE blocks
      Ô£ö Should handle COMPILE with terminator on same line
      Ô£ö Should handle OMIT with terminator on same line
      Ô£ö Should detect multiple unterminated OMIT blocks
      Ô£ö Should handle FILE declaration with OMIT/COMPILE blocks
    RETURN Statement Validation
      Ô£ö Should flag method with return type but no RETURN statement
      Ô£ö Should flag method with return type but only empty RETURN
      Ô£ö Should NOT flag method with return type and RETURN with value
      Ô£ö Should NOT flag method without return type
      Ô£ö Should handle RETURN with expression
      Ô£ö Should validate MAP procedures with return types
    IF-ELSE with Multiple Statements
      Ô£ö Should NOT flag ELSE with single statement
      Ô£ö Should NOT flag ELSE with multiple statements using dot terminators
    RECORD Keyword as Field Name
      Ô£ö Should NOT flag RECORD keyword when used as field name with prefix
    CLASS Property Validation
      Ô£ö Should flag QUEUE structure as direct CLASS property
      Ô£ö Should NOT flag QUEUE reference (&QUEUE) as CLASS property
      Ô£ö Should NOT flag GROUP structure as CLASS property
      Ô£ö Should flag multiple QUEUE structures in CLASS
    QUEUE Structure Nesting Validation
      Ô£ö Should flag QUEUE structure nested inside QUEUE
      Ô£ö Should NOT flag QUEUE reference (&QUEUE) inside QUEUE
      Ô£ö Should NOT flag GROUP structure inside QUEUE
      Ô£ö Should flag multiple nested QUEUEs

  DocumentStructure Semantic APIs - Phase 1
    getMapBlocks()
      Ô£ö should return empty array when no MAP blocks exist
      Ô£ö should return single MAP block
      Ô£ö should return multiple MAP blocks
      Ô£ö should only return MAP structures, not MODULE or other types
    getMemberParentFile()
      Ô£ö should return null when no MEMBER statement exists
      Ô£ö should return MEMBER filename when present
      Ô£ö should return MEMBER filename even if not on first line
      Ô£ö should only look in first 10 lines for MEMBER
    getClassModuleFile()
      Ô£ö should return null when CLASS has no MODULE
      Ô£ö should return MODULE filename when CLASS has MODULE
      Ô£ö should handle MODULE in different position in attribute list
      Ô£ö should not confuse MODULE in CLASS attributes with MODULE structure in MAP
    isInMapBlock()
      Ô£ö should return false for line before MAP
      Ô£ö should return false for MAP line itself
      Ô£ö should return true for lines inside MAP
      Ô£ö should return false for END line
      Ô£ö should return false for lines after MAP
      Ô£ö should handle nested MODULE blocks inside MAP correctly
      Ô£ö should handle multiple MAP blocks correctly
    getClasses()
      Ô£ö should return empty array when no CLASS blocks exist
      Ô£ö should return single CLASS block
      Ô£ö should return multiple CLASS blocks
      Ô£ö should only return CLASS structures, not INTERFACE
    findMapDeclarations()
      Ô£ö should return empty array when procedure not found in MAP
      Ô£ö should find MAP procedure declaration
      Ô£ö should find MAP shorthand procedure declaration
      Ô£ö should return all overloads of a procedure
      Ô£ö should handle case-insensitive search
    findProcedureImplementations()
      Ô£ö should return empty array when procedure not found
      Ô£ö should find global procedure implementation
      Ô£ö should not include MAP declarations
      Ô£ö should find all overloaded implementations
      Ô£ö should handle case-insensitive search
    getGlobalVariables()
      Ô£ö should return empty array when no global variables
      Ô£ö should find global variables before first CODE
      Ô£ö should not include local variables after CODE
      Ô£ö should only include labels at column 0
    getFirstCodeMarker()
      Ô£ö should return null when no CODE marker exists
      Ô£ö should find first CODE marker
      Ô£ö should return first CODE even with multiple procedures
    isInGlobalScope()
      Ô£ö should return true for label before first CODE
      Ô£ö should return false for label after first CODE
      Ô£ö should return false when no CODE marker exists

  ClarionDocumentSymbolProvider - Structure View Tests
    CLASS Structure Tests

=== CLASS with method declarations ===
CLASS (MyClass) (Class)
  Value LONG (Variable)
  Init (Function) [MethodDecl]
  Destroy (Function) [MethodDecl]

Init method kind: Function, flags: MethodDecl
Destroy method kind: Function, flags: MethodDecl
      Ô£ö Should parse CLASS with method declarations

=== CLASS with parameterized methods ===
CLASS (StringTheory) (Class)
  value STRING (Variable)
  Append (Function) [MethodDecl]
  GetValue (Function) [MethodDecl]

Append: Append, detail: (STRING pValue )
GetValue: GetValue, detail: (), STRING
      Ô£ö Should parse CLASS with method that has parameters

=== CLASS with complex method signature ===
CLASS (MyClass) (Class)
  Flush (Function) [MethodDecl]

Flush found: true
  Name: Flush
  Kind: Function
  Detail: (StringTheory pStr ), long , proc , virtual
  _isMethodDeclaration: true
Class has 1 children:
  - Flush (Function)
      Ô£ö Should parse CLASS with complex method signature

=== CLASS with properties and methods ===
CLASS (MyClass) (Class)
  Count LONG (Variable)
  Name STRING(50) (Variable)
  Init (Function) [MethodDecl]
  Process (Function) [MethodDecl]

Variables found: Count LONG, Name STRING(50)
Functions found: Init, Process
      Ô£ö Should distinguish between properties and methods in CLASS
    MAP Structure Tests

=== MAP with procedure declarations ===
MAP (Namespace)
  LoadData (Function) [MapProc]
  SaveData (Function) [MapProc]

MAP found: true
LoadData found: true, flags: MapProc
SaveData found: true, flags: MapProc
      Ô£ö Should parse MAP with procedure declarations

=== MAP with MODULE - Basic Tree ===
MAP (Namespace)
  MODULE('KERNEL32') (Namespace)
    GetTickCount (Function) [MapProc]
  HelperProc (Function) [MapProc]


=== MAP with MODULE - Verbose Output ===
MAP (Namespace) {sort="map"} (2 children)
  MODULE('KERNEL32') (Namespace) {sort="module('kernel32')"} (1 children)
    GetTickCount (Function) [MapProc] {detail="(), ULONG"} (0 children)
  HelperProc (Function) [MapProc] {detail="()"} (0 children)


=== Symbol Statistics ===
Symbol Statistics:
  Function: 2
  Namespace: 2


=== Flattened Symbol Paths ===
  MAP (Namespace)
  MAP > MODULE('KERNEL32') (Namespace)
  MAP > MODULE('KERNEL32') > GetTickCount (Function)
  MAP > HelperProc (Function)

=== MAP Children Details ===
MAP has 2 direct children:
  [0] MODULE('KERNEL32') (Namespace) - 1 children
  [1] HelperProc (Function) - 0 children
      Ô£ö Should parse MAP with MODULE declarations
    PROCEDURE Tests

=== Global PROCEDURE ===
MyProc ( ) (Function) [GlobalProc]
  LocalVar LONG (Variable)

MyProc flags: GlobalProc
      Ô£ö Should parse global PROCEDURE

=== PROCEDURE with ROUTINE ===
MyProc ( ) (Function) [GlobalProc]
  LocalVar LONG (Variable)
  MyRoutine () (Method)

      Ô£ö Should parse PROCEDURE with ROUTINE

=== Checking for code statements in outline ===
Myproc ( ) (Function) [GlobalProc]
  Call_ButtonProc () (Method)
    rou:JustCalledD17 byte (Variable)
    rou:JustCalledPW byte (Variable)
    rou:JustCalledD4 Byte (Variable)
    SaveWallID BYTE (Variable)

      Ô£ö Should NOT show code statements in outline

=== PROCEDURE with ROUTINE DATA ===
MyProc ( ) (Function) [GlobalProc]
  ProcVar LONG (Variable)
  Call_ButtonProc () (Method)
    rou:JustCalledD17 BYTE (Variable)
    rou:JustCalledPW BYTE (Variable)
    rou:JustCalledD4 BYTE (Variable)
    SaveWallID BYTE (Variable)


ROUTINE children:
  - rou:JustCalledD17 BYTE
  - rou:JustCalledPW BYTE
  - rou:JustCalledD4 BYTE
  - SaveWallID BYTE
      Ô£ö Should parse ROUTINE with DATA section
    Real-world Example - StringTheory

=== StringTheory CLASS (Real-world) ===
Class (StringTheory) (Class)
  Link (Function) [MapProc]
  streamFileName STRING (Variable)
  value STRING (Variable)
  Append (Function) [MethodDecl]
  Clip (Function) [MethodDecl]
  Flush (Function) [MethodDecl]
  GetValue (Function) [MethodDecl]


Methods found:
  Append: true
  Clip: true
  Flush: true (Function)
  GetValue: true

Properties found:
  value: true
  streamFileName: true
      Ô£ö Should correctly parse StringTheory CLASS excerpt
    Outline View - Method Implementation Details

=== Method Implementation Details Test ===
StepClass.Init ( BYTE Controls ) (Function) [MethodImpl]
StepClass.Kill () (Function) [MethodImpl]
MyGlobalProc ( ) (Function) [GlobalProc]

      Ô£ö Method implementations should show "Method Implementation" detail

=== Interface Method Implementation Details Test ===
GetSelectedItem ( ) (Function) [GlobalProc]
Choice ( ) (Function) [GlobalProc]

      Ô£ö Interface method implementations should show "Method Implementation" detail

  Downstream Consumers - Dot Terminator Tests
    FoldingProvider with Dot-Terminated Structures

=== FoldingProvider Test: Dot-Terminated IF ===
Total fold ranges: 3
  Range 0: lines 0-6
  Range 1: lines 2-6
  Range 2: lines 3-5
      Ô£ö Should create fold range for dot-terminated IF

=== FoldingProvider Test: Dot-Terminated LOOP ===
Total fold ranges: 3
      Ô£ö Should create fold range for dot-terminated LOOP

=== FoldingProvider Test: Dot-Terminated CASE ===
Total fold ranges: 3
      Ô£ö Should create fold range for dot-terminated CASE
    DiagnosticProvider with Dot-Terminated Structures

=== DiagnosticProvider Test: Dot-Terminated IF ===
Total diagnostics: 0
      Ô£ö Should NOT flag dot-terminated IF as unterminated

=== DiagnosticProvider Test: Dot-Terminated LOOP ===
Total diagnostics: 0
      Ô£ö Should NOT flag dot-terminated LOOP as unterminated

=== DiagnosticProvider Test: Dot-Terminated CASE ===
Total diagnostics: 0
      Ô£ö Should NOT flag dot-terminated CASE as unterminated

=== DiagnosticProvider Test: Unterminated IF (No Dot) ===
Total diagnostics: 1
      Ô£ö SHOULD flag actually unterminated IF

  HoverProvider - DocumentStructure API Integration
    MAP procedure hover (declaration ÔåÆ implementation)
[2026-01-05T18:35:14.636Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 1:7 in test://hover1.clw
[2026-01-05T18:35:14.636Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 1:7
[2026-01-05T18:35:14.636Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "TestProc" at position
[2026-01-05T18:35:14.636Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=true, isInClassBlock=false
[2026-01-05T18:35:14.636Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="    TestProc PROCEDURE()", match=true, inMapBlock=true
[2026-01-05T18:35:14.636Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Inside MAP block at line 1
[2026-01-05T18:35:14.636Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration regex match: YES, line="    TestProc PROCEDURE()"
[2026-01-05T18:35:14.636Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Procedure name: "TestProc", range: 4-12, cursor at: 7
[2026-01-05T18:35:14.636Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Cursor is on procedure name, searching for implementation with overload resolution...
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of TestProc from position 1
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 4 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: TestProc PROCEDURE()
[2026-01-05T18:35:14.636Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for TestProc at line 4
[2026-01-05T18:35:14.636Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="TestProc", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.636Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=true, isAtImplementation=false
[2026-01-05T18:35:14.636Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=true
[2026-01-05T18:35:14.636Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.636Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from test://hover1.clw
[2026-01-05T18:35:14.636Z] [HoverFormatter] ÔØî ERROR: Error reading PROCEDURE implementation: Error: ENOENT: no such file or directory, open 'F:\github\Clarion-Extension\Clarion-Extension\test:\hover1.clw'
      2) should show implementation hover when hovering on MAP declaration
[2026-01-05T18:35:14.637Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 1:7 in test://hover2.clw
[2026-01-05T18:35:14.637Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 1:7
[2026-01-05T18:35:14.637Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "NonExistent" at position
[2026-01-05T18:35:14.637Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=true, isInClassBlock=false
[2026-01-05T18:35:14.637Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="    NonExistent PROCEDURE()", match=true, inMapBlock=true
[2026-01-05T18:35:14.637Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Inside MAP block at line 1
[2026-01-05T18:35:14.637Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration regex match: YES, line="    NonExistent PROCEDURE()"
[2026-01-05T18:35:14.637Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Procedure name: "NonExistent", range: 4-15, cursor at: 7
[2026-01-05T18:35:14.637Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Cursor is on procedure name, searching for implementation with overload resolution...
[2026-01-05T18:35:14.637Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of NonExistent from position 1
[2026-01-05T18:35:14.637Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.637Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 4 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.637Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.637Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.637Z] [MapProcedureResolver] Ôä╣´©Å INFO: No implementation found for NonExistent
[2026-01-05T18:35:14.637Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="NonExistent", hasMapDecl=true, hasProcImpl=false
[2026-01-05T18:35:14.637Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=true, isAtImplementation=false
[2026-01-05T18:35:14.637Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=true
[2026-01-05T18:35:14.637Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=false, isAtImplementation=false
[2026-01-05T18:35:14.637Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Skipping implementation preview (procImpl=false, isAtImplementation=false)
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO: Checking for method declaration at line 1, char 7
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO: Total tokens at this line: 4
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO: Tokens on line 1:
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=5, subType=undefined, value="NonExistent", start=4, label="undefined"
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=28, subType=39, value="PROCEDURE", start=16, label="NonExistent"
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=19, subType=undefined, value="(", start=25, label="undefined"
[2026-01-05T18:35:14.637Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=19, subType=undefined, value=")", start=26, label="undefined"
[2026-01-05T18:35:14.637Z] [HoverProvider] Ôä╣´©Å INFO: No scope found - checking for global variables
[2026-01-05T18:35:14.637Z] [VariableHoverResolver] Ôä╣´©Å INFO: No scope found and no global variable found - cannot provide hover
[2026-01-05T18:35:14.637Z] [HoverProvider] Ôä╣´©Å INFO: No scope found and no global variable found - cannot provide hover
[2026-01-05T18:35:14.637Z] [HoverProvider] Ôä╣´©Å INFO: Checking if NonExistent is a CLASS type...
[2026-01-05T18:35:14.638Z] [HoverProvider] Ôä╣´©Å INFO: Looking up CLASS type: NonExistent in project: test:\
[2026-01-05T18:35:14.681Z] [HoverProvider] Ôä╣´©Å INFO: No CLASS definition found for: NonExistent
      Ô£ö should handle MAP declaration without implementation (44ms)
    MAP procedure hover (implementation ÔåÆ declaration)
[2026-01-05T18:35:14.681Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 4:3 in test://hover3.clw
[2026-01-05T18:35:14.681Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 4:3
[2026-01-05T18:35:14.681Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "TestProc" at position
[2026-01-05T18:35:14.681Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.682Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="TestProc PROCEDURE()", match=true, inMapBlock=false
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: TestProc
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 13
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "hover3.clw"
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 2
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 4 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: TestProc PROCEDURE()
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for TestProc at line 1
[2026-01-05T18:35:14.682Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="TestProc", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.682Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=false, isAtImplementation=true
[2026-01-05T18:35:14.682Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=false
[2026-01-05T18:35:14.682Z] [HoverFormatter] ÔØî ERROR: Error reading MAP declaration: Error: ENOENT: no such file or directory, open 'F:\github\Clarion-Extension\Clarion-Extension\test:\hover3.clw'
[2026-01-05T18:35:14.682Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=true
[2026-01-05T18:35:14.682Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Skipping implementation preview (procImpl=true, isAtImplementation=true)
      Ô£ö should show MAP declaration hover when hovering on implementation
[2026-01-05T18:35:14.682Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 0:3 in test://hover4.clw
[2026-01-05T18:35:14.682Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 0:3
[2026-01-05T18:35:14.682Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "TestProc" at position
[2026-01-05T18:35:14.682Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.682Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="TestProc PROCEDURE()", match=true, inMapBlock=false
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: TestProc
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 7
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 0 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 0 MAP structure(s) in document "hover4.clw"
[2026-01-05T18:35:14.682Z] [MapProcedureResolver] Ôä╣´©Å INFO: No MAP blocks found
[2026-01-05T18:35:14.682Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration not found in current file, checking for MEMBER...
[2026-01-05T18:35:14.682Z] [MethodHoverResolver] Ôä╣´©Å INFO: Checking for method declaration at line 0, char 3
[2026-01-05T18:35:14.682Z] [MethodHoverResolver] Ôä╣´©Å INFO: Total tokens at this line: 4
[2026-01-05T18:35:14.682Z] [MethodHoverResolver] Ôä╣´©Å INFO: Found method declaration pattern: Label="TestProc" + PROCEDURE on line 0
[2026-01-05T18:35:14.682Z] [MethodHoverResolver] Ôä╣´©Å INFO: Found method declaration: TestProc at line 0
[2026-01-05T18:35:14.682Z] [HoverProvider] Ôä╣´©Å INFO: Current scope: PROCEDURE
[2026-01-05T18:35:14.682Z] [HoverProvider] Ôä╣´©Å INFO: Checking if TestProc is a parameter...
[2026-01-05T18:35:14.682Z] [HoverProvider] Ôä╣´©Å INFO: TestProc is not a parameter
[2026-01-05T18:35:14.682Z] [HoverProvider] Ôä╣´©Å INFO: Checking if TestProc is a local variable...
[2026-01-05T18:35:14.682Z] [VariableHoverResolver] Ôä╣´©Å INFO: findLocalVariableInfo called for word: TestProc, scope: PROCEDURE at line 0
[2026-01-05T18:35:14.682Z] [VariableHoverResolver] Ôä╣´©Å INFO: Found procedure symbol: TestProc ( )
[2026-01-05T18:35:14.682Z] [VariableHoverResolver] Ôä╣´©Å INFO: Searching with searchText="TestProc"
[2026-01-05T18:35:14.683Z] [HoverProvider] Ôä╣´©Å INFO: TestProc is not a local variable
[2026-01-05T18:35:14.683Z] [HoverProvider] Ôä╣´©Å INFO: Checking for module-local variable in current file...
[2026-01-05T18:35:14.683Z] [VariableHoverResolver] Ôä╣´©Å INFO: Checking for module-local variable in current file...
[2026-01-05T18:35:14.683Z] [VariableHoverResolver] Ôä╣´©Å INFO: Ô£à Found module-local variable in current file: TestProc at line 0
      Ô£ö should NOT show MAP hover for implementation outside MAP context

  ImplementationProvider - DocumentStructure API Integration
    MAP procedure implementation finding (integration test)
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of TestProc from position 1
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 4 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: TestProc PROCEDURE()
[2026-01-05T18:35:14.683Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for TestProc at line 4
      Ô£ö should find implementation for MAP declaration
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of NonExistent from position 1
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 4 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: No implementation found for NonExistent
      Ô£ö should handle MAP declaration without implementation
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of TestProc from position 2
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 2 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 10 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 5: TestProc PROCEDURE()
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 10: TestProc PROCEDURE(STRING s)
[2026-01-05T18:35:14.684Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded implementations for TestProc
[2026-01-05T18:35:14.685Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration parameter types: [STRING]
[2026-01-05T18:35:14.685Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation at line 5 parameter types: []
[2026-01-05T18:35:14.685Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation at line 10 parameter types: [STRING]
[2026-01-05T18:35:14.685Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 10
      Ô£ö should handle overloaded procedures correctly

  FILE Structure Validation
    Ô£ö should error when FILE missing DRIVER attribute
    Ô£ö should error when FILE missing RECORD section
    Ô£ö should not error when FILE has both DRIVER and RECORD

  CASE Structure Validation
    Ô£ö should allow CASE without OF clause
    Ô£ö should error when OROF without preceding OF
    Ô£ö should not error when CASE has valid OF and OROF
    Ô£ö should allow CASE with just OF (no OROF)

  CHOOSE Function Recognition
    Ô£ö should recognize CHOOSE as a function

  EXECUTE Structure Validation
    Ô£ö should warn when EXECUTE has string literal expression
    Ô£ö should not warn when EXECUTE has valid numeric expression

  MapProcedureResolver - Refactor Tests
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of TestProc from position 1
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 4 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: TestProc PROCEDURE()
[2026-01-05T18:35:14.687Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for TestProc at line 4
    Ô£ö findProcedureImplementation - detects position inside MAP block
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of TestProc from position 7
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 7 is inside PROCEDURE/PROGRAM block. Found 1 blocks containing this position
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 7 is inside a PROCEDURE/ROUTINE/PROGRAM block (line 4-8), not a MAP declaration
    Ô£ö findProcedureImplementation - rejects position inside PROCEDURE block
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of TestProc from position 10
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 10 is inside PROCEDURE/PROGRAM block. Found 1 blocks containing this position
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 10 is inside a PROCEDURE/ROUTINE/PROGRAM block (line 4-10), not a MAP declaration
    Ô£ö findProcedureImplementation - rejects position outside MAP block

  MapProcedureResolver - DocumentStructure-based Tests
    Forward Navigation: MAP Declaration ÔåÆ PROCEDURE Implementation
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ProcessOrder from position 1
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 5 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: ProcessOrder PROCEDURE(LONG orderId)
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for ProcessOrder at line 4
      Ô£ö Should find implementation for simple MAP procedure
[2026-01-05T18:35:14.688Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ProcessOrder from position 1
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 6 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: ProcessOrder PROCEDURE(LONG orderId)
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for ProcessOrder at line 4
      Ô£ö Should find implementation for MAP procedure with PROCEDURE keyword
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of SaveRecord from position 1
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 11 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: SaveRecord PROCEDURE(STRING fileName, LONG recordId, *STRING result)
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for SaveRecord at line 4
      Ô£ö Should find implementation in multi-parameter procedure
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of SecondProc from position 5
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 5 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 5 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 12: SecondProc PROCEDURE(LONG id)
[2026-01-05T18:35:14.689Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for SecondProc at line 12
      Ô£ö Should handle multiple MAP blocks correctly
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of GetValue from position 1
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 5 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 4: GetValue PROCEDURE(),LONG
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for GetValue at line 4
      Ô£ö Should handle MAP procedure with return type
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ProcessOrder from position 0
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 0 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 0 is not inside a MAP block - checking if this is an INCLUDE file
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Position 0 is not inside a MAP block and not a MODULE INCLUDE file
      Ô£ö Should return null when not inside MAP block
    Reverse Navigation: PROCEDURE Implementation ÔåÆ MAP Declaration
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: ProcessOrder
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 16
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 2
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: ProcessOrder(LONG orderId)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for ProcessOrder at line 1
      Ô£ö Should find MAP declaration from procedure implementation
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: ProcessOrder
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 16
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 2
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 6 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: ProcessOrder PROCEDURE(LONG orderId)
[2026-01-05T18:35:14.690Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for ProcessOrder at line 1
      Ô£ö Should find MAP declaration with PROCEDURE keyword
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: GetValue
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 17
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 2
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: GetValue(),LONG
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for GetValue at line 1
      Ô£ö Should handle procedure with return type
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: ProcessOrder
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 9
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 0 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 0 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: No MAP blocks found
      Ô£ö Should return null when no MAP declaration exists
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: HelperProc
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 21
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 5
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 13 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 4: HelperProc()
[2026-01-05T18:35:14.691Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for HelperProc at line 4
      Ô£ö Should handle MODULE inside MAP
    Overload Resolution
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: AtSortReport
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 34
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 3
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 13 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: AtSortReport(STRING StartConfigGrp, STRING StartReRunGrp)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: AtSortReport(LONG orderId)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for AtSortReport
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: [STRING, STRING]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 1 parameter types: [STRING, STRING]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 1
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: AtSortReport
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 34
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 3
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 13 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: AtSortReport(STRING StartConfigGrp, STRING StartReRunGrp)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: AtSortReport(LONG orderId)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for AtSortReport
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: [LONG]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 1 parameter types: [STRING, STRING]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 2 parameter types: [LONG]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 2
      Ô£ö Should resolve overloaded MAP procedure by parameter types (STRING, STRING vs LONG)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ProcessOrder from position 1
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 1 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 13 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 5: ProcessOrder PROCEDURE(LONG orderId)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 10: ProcessOrder PROCEDURE(STRING orderCode, LONG customerId)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded implementations for ProcessOrder
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration parameter types: [LONG]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation at line 5 parameter types: [LONG]
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 5
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of ProcessOrder from position 2
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 2 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 13 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 0 MODULE blocks in MAP
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 5: ProcessOrder PROCEDURE(LONG orderId)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 10: ProcessOrder PROCEDURE(STRING orderCode, LONG customerId)
[2026-01-05T18:35:14.692Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded implementations for ProcessOrder
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration parameter types: [STRING, LONG]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation at line 5 parameter types: [LONG]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation at line 10 parameter types: [STRING, LONG]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 10
      Ô£ö Should resolve overloaded implementation from MAP declaration
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: UpdateRecord
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 28
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 3
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 10 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: UpdateRecord(*CustomerType cust)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: UpdateRecord(&CustomerType cust)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for UpdateRecord
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: [*CUSTOMERTYPE]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 1 parameter types: [*CUSTOMERTYPE]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 1
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: UpdateRecord
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 28
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 3
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 10 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: UpdateRecord(*CustomerType cust)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 2: UpdateRecord(&CustomerType cust)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for UpdateRecord
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: [&CUSTOMERTYPE]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 1 parameter types: [*CUSTOMERTYPE]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 2 parameter types: [&CUSTOMERTYPE]
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 2
      Ô£ö Should handle pointer types in overloads
    Edge Cases
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: Process
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 22
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 4, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 4, finishesAt 6
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 4 (including INCLUDEs)...
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 5: Process(LONG id)
[2026-01-05T18:35:14.693Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for Process at line 5
      Ô£ö Should not confuse MAP procedure with CLASS method
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: HelperProc
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 15
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 0, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "test.clw"
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 0, finishesAt 2
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 0 (including INCLUDEs)...
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 5 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 1: HelperProc(STRING text)
[2026-01-05T18:35:14.694Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for HelperProc at line 1
      Ô£ö Should handle indented PROCEDURE implementation

  MAP Token Type Investigation

=== MEMBER File Token Analysis ===
Total tokens: 28

Found 1 MAP token(s):
  MAP 1:
    Line: 2
    Type: 16 (Structure)
    SubType: 16 (Structure)
    FinishesAt: 5

DocumentStructure found 1 MAP block(s)
  MAP Block 1: line 2, finishesAt 5

­ƒöì MAP token type: 16 (expecting 16 for Structure)
   Type name: Structure
    Ô£ö MAP in MEMBER file should be Structure type

=== PROGRAM File Token Analysis ===
Total tokens: 16

Found 1 MAP token(s):
  MAP 1:
    Line: 2
    Type: 16 (Structure)
    SubType: 16 (Structure)
    FinishesAt: 4

DocumentStructure found 1 MAP block(s)

­ƒöì MAP token type: 16 (expecting 16 for Structure)
    Ô£ö MAP in PROGRAM file should be Structure type

=== HEAVILY INDENTED MAP Token Analysis ===
Total tokens: 30

Found 1 MAP token(s):
  MAP 1:
    Line: 2
    Type: 16 (Structure)
    SubType: 16 (Structure)
    FinishesAt: 5
    Start column: 21

DocumentStructure found 1 MAP block(s)

­ƒöì MAP token type: 16 (expecting 16 for Structure)

Ô£à Heavily indented MAP is correctly tokenized as Structure
    Ô£ö MAP with heavy indentation (like real file)

=== MEMBER vs PROGRAM Comparison ===
MEMBER MAP: type=16 (Structure)
PROGRAM MAP: type=16 (Structure)
    Ô£ö Compare MEMBER vs PROGRAM MAP tokenization

  Keywords in field qualifiers bug

=== Testing nts:record field qualifier ===
Total tokens: 10
  Line 0, col 1: type=Variable, value='f'
  Line 0, col 3: type=Variable, value='GlobalResponse'
  Line 0, col 17: type=Operator, value='='
  Line 0, col 18: type=Variable, value='RequestCancelled'
  Line 1, col 4: type=StructurePrefix, value='nts:record'
  Line 1, col 15: type=Operator, value='='
  Line 1, col 17: type=StructurePrefix, value='hold:nts'
  Line 1, col 25: type=Delimiter, value=':'
  Line 1, col 27: type=Variable, value='ecord'
  Line 2, col 1: type=Variable, value='nd'

Found 0 'record' tokens
Ô£à Bug fixed or not present
    Ô£ö BUG: nts:record incorrectly tokenized as RECORD keyword

=== Testing nts:case field qualifier ===
Total tokens: 10
  Line 0, col 1: type=Variable, value='f'
  Line 0, col 3: type=Variable, value='GlobalResponse'
  Line 0, col 17: type=Operator, value='='
  Line 0, col 18: type=Variable, value='RequestCancelled'
  Line 1, col 4: type=StructurePrefix, value='nts:case'
  Line 1, col 13: type=Operator, value='='
  Line 1, col 15: type=StructurePrefix, value='hold:nts'
  Line 1, col 23: type=Delimiter, value=':'
  Line 1, col 25: type=Variable, value='ase'
  Line 2, col 1: type=Variable, value='nd'

Found 0 'case' tokens
Ô£à Bug fixed or not present
    Ô£ö BUG: nts:case incorrectly tokenized as CASE keyword

  MODULE Structure Tests
    3) MODULE in CLASS attribute list should NOT be a structure
    4) MODULE in CLASS attribute should NOT have parent
    Ô£ö MODULE in MAP should be a structure and child of MAP
    Ô£ö MODULE with dot terminator in MAP should be a structure
    Ô£ö MODULE in MAP with END should have proper parent-child relationship
    Ô£ö MODULE should NOT be child of PROCEDURE

  ScopeAnalyzer
    getTokenScope
      Ô£ö should identify global scope in PROGRAM file
      Ô£ö should identify module scope in MEMBER file
      Ô£ö should identify procedure scope
      Ô£ö should identify routine scope
    getSymbolScope
      Ô£ö should identify global data scope
      Ô£ö should identify module-local data scope
      Ô£ö should identify procedure-local data scope
      Ô£ö should identify routine-local data scope
    canAccess
      Ô£ö should allow access within same procedure
      Ô£ö should deny access to procedure-local var from different procedure
      Ô£ö should allow procedure to access global data
      Ô£ö should allow routine to access procedure data
      Ô£ö should deny procedure access to routine-local data
    getVisibleFiles
      Ô£ö should return declaring file for global symbol
      Ô£ö should return only declaring file for module-local symbol
      Ô£ö should return only declaring file for procedure-local symbol
      Ô£ö should return only declaring file for routine-local symbol
    Edge Cases
      Ô£ö should handle ROUTINE without DATA section
      Ô£ö should handle empty PROGRAM file
      Ô£ö should handle MEMBER without module name
      Ô£ö should handle file with no PROGRAM or MEMBER
      Ô£ö should handle nested procedure attempt (invalid Clarion)
      Ô£ö should handle ROUTINE at global level (invalid but should not crash)
      Ô£ö should handle multiple MEMBER statements (invalid but should handle first)
      Ô£ö should handle very deep routine nesting in same procedure
      Ô£ö should handle PROCEDURE with only CODE, no DATA
      Ô£ö should handle symbol at line 0
      Ô£ö should handle access check with out-of-bounds line numbers
      Ô£ö should handle cross-file access check gracefully
    Cross-File Access (Phase 3)
      Ô£ö should allow cross-file access to global symbols
      Ô£ö should deny cross-file access to module-local symbols
      Ô£ö should deny cross-file access to procedure-local symbols
      Ô£ö should deny cross-file access to routine-local symbols
      Ô£ö should allow cross-file access from PROGRAM to global in PROGRAM

  Semantic Tokens - Period Terminator Tests
    Ô£ö Period terminator should have parent relationship
    Ô£ö Multiple period terminators should match their parents
    Ô£ö Period and END terminators should both work
    Ô£ö Period closing WINDOW structure

  Solution-Based Cross-File Scope Tests

­ƒöº Setting up solution-based tests...
­ƒôé Test solution path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\RealWorldTestSuite.sln
Ô£à Solution file exists
­ƒöä Loading solution...
Ô£à Solution loaded with 1 project(s)
   ­ƒôª Project: CrossFileScope
      Path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite
      Files: 3
         - main.clw
         - utils.clw
         - StartProc.clw
    Step 3: Get Actual File Documents
   Ô£à Found main.clw: main.clw
      Ô£ö Should find main.clw in loaded solution
   Ô£à Found utils.clw: utils.clw
      Ô£ö Should find utils.clw in loaded solution
   Ô£à Absolute path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\main.clw
      Ô£ö Should get absolute path for main.clw
   Ô£à Read 4394 bytes from main.clw
      Ô£ö Should read file content from main.clw
    Step 4: Pass Real URIs to Providers
   Ô£à Created TextDocument with URI: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
      Ô£ö Should create TextDocument from real file
   Ô£à Got TextDocument from project method
      Ô£ö Should use getTextDocumentByPath from project
   Ô£à Tokenized 165 tokens from main.clw
      Found PROGRAM at line 0
      Found GlobalCounter at line 86
      Ô£ö Should tokenize real file content
    Step 5: Test Cross-File Navigation with Real Files
   ­ƒôì Found GlobalCounter in utils.clw at line 50
[2026-01-05T18:35:14.710Z] [SymbolDefinitionResolver] Ôä╣´©Å INFO: Looking for label definition: GlobalCounter
   ­ƒöì Definition result: {
  uri: 'file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw',
  range: {
    start: { line: 86, character: 0 },
    end: { line: 86, character: 13 }
  }
}
   ­ƒôî Jump to: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw line 86
      Ô£ö TEST 1: F12 on GlobalCounter in utils.clw should jump to main.clw
   ­ƒôì Found IncrementCounter call at line 92 (0-based) = line 93 (1-based shown in VSCode)
   ­ƒôì Found IncrementCounter MAP declaration at line 75 (0-based) = line 76 (1-based)
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: IncrementCounter
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 165
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 73, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "main.clw"
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 73, finishesAt 84
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 73 (including INCLUDEs)...
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 36 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 75: IncrementCounter()  !can be written without parentheses
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 79: IncrementCounter  PROCEDURE()
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for IncrementCounter
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: []
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 75 parameter types: []
[2026-01-05T18:35:14.711Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 75
   ­ƒöì F12 result: {
  uri: 'file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw',
  range: {
    start: { line: 75, character: 0 },
    end: { line: 75, character: 16 }
  }
}
   ­ƒôî F12 jumps to line 75 (0-based) = line 76 (1-based in VSCode)
   ­ƒôî File: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
   Ô£à F12 correctly jumped to different line (likely MAP declaration)
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: IncrementCounter
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 165
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 73, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "main.clw"
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 73, finishesAt 84
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 73 (including INCLUDEs)...
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 36 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 75: IncrementCounter()  !can be written without parentheses
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 79: IncrementCounter  PROCEDURE()
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for IncrementCounter
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: []
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 75 parameter types: []
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 75
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of IncrementCounter from position 75
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 75 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 36 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE blocks in MAP
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MODULE('utils.clw') found at line 74
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found procedure IncrementCounter in MODULE block, searching external file
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('utils.clw') returned: null
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure IncrementCounter implementation at line 46
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure IncrementCounter
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.712Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in utils.clw, searching for procedure declaration
[2026-01-05T18:35:14.713Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.713Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Procedure IncrementCounter not declared in MAP of utils.clw
[2026-01-05T18:35:14.713Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Searching for direct implementation in file (may be declared in parent PROGRAM's MODULE block)
[2026-01-05T18:35:14.713Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found direct implementation in file at line 46
   ­ƒöì Ctrl+F12 result: {
  uri: 'file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw',
  range: {
    start: { line: 46, character: 0 },
    end: { line: 46, character: 9 }
  }
}
   ­ƒôî Ctrl+F12 jumps to line 46 (0-based) = line 47 (1-based in VSCode)
   ­ƒôî File: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
   Ô£à Ctrl+F12 correctly navigated to implementation in MEMBER file
      Ô£ö TEST 2: F12 vs Ctrl+F12 for IncrementCounter procedure
   ­ƒôì Found ModuleData declaration at line 44
   ÔÜá´©Å Module-local scope blocking test requires main.clw to reference ModuleData
      Currently main.clw line 77 has this commented out
      Ô£ö TEST 4: Module-local variable should be blocked cross-file
    TEST Hover Consistency
   ­ƒôì Testing hover at MAP declaration line 75 (0-based) = line 76 (1-based)
[2026-01-05T18:35:14.714Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 75:7 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.714Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 75:7
[2026-01-05T18:35:14.714Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "IncrementCounter" at position
[2026-01-05T18:35:14.714Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=true, isInClassBlock=false
[2026-01-05T18:35:14.714Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Detected procedure call: IncrementCounter()
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: IncrementCounter
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 165
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 73, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "main.clw"
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 73, finishesAt 84
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 73 (including INCLUDEs)...
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 36 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 75: IncrementCounter()  !can be written without parentheses
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 79: IncrementCounter  PROCEDURE()
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for IncrementCounter
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: []
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 75 parameter types: []
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 75
[2026-01-05T18:35:14.714Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration found: true
[2026-01-05T18:35:14.714Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP from INCLUDE: false, mapUri: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.714Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Looking for implementation in current document at MAP line 75
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of IncrementCounter from position 75
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 75 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 36 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE blocks in MAP
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MODULE('utils.clw') found at line 74
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found procedure IncrementCounter in MODULE block, searching external file
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('utils.clw') returned: null
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure IncrementCounter implementation at line 46
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure IncrementCounter
[2026-01-05T18:35:14.714Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.715Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in utils.clw, searching for procedure declaration
[2026-01-05T18:35:14.715Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.715Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Procedure IncrementCounter not declared in MAP of utils.clw
[2026-01-05T18:35:14.715Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Searching for direct implementation in file (may be declared in parent PROGRAM's MODULE block)
[2026-01-05T18:35:14.715Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found direct implementation in file at line 46
[2026-01-05T18:35:14.715Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Implementation found in current document: true
[2026-01-05T18:35:14.715Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Final result: mapDecl=true, procImpl=true
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="IncrementCounter", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=true, isAtImplementation=false
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=true
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Implementation starts at line 46
[2026-01-05T18:35:14.715Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Adding implementation preview with 8 lines

   ­ƒôï Hover at MAP declaration:
   ------------------------------------------------------------
**IncrementCounter** ­ƒôª Module Procedure


**Implemented in** `utils.clw` @ line 47:
```clarion
IncrementCounter PROCEDURE


  CODE
  GlobalCounter += 1    ! TEST 1: F12 here should jump to main.clw line 87
  ModuleData = 99       ! Should work - same module
  GlobalHelper()        ! TEST 6: F12 should jump to main.clw line 105 (global procedure accessible here)
  ! ...
```

*Press Ctrl+F12 to navigate to implementation*
   ------------------------------------------------------------

   Ô£ô Shows scope info: Ô£à YES
   Ô£ô Mentions F12: Ô£à YES
   Ô£ô Mentions Ctrl+F12: Ô£à YES
   Ô£ô Mentions "definition": ÔØî NO
   Ô£ô Mentions "implementation": Ô£à YES
   Ô£à CORRECT: Shows Ctrl+F12 for implementation (we are at definition)
      Ô£ö Hover on IncrementCounter at MAP declaration (line 76)
   ­ƒôì Testing hover at GlobalHelper MAP declaration line 83 (0-based) = line 84 (1-based)
[2026-01-05T18:35:14.715Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 83:0 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.715Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 83:0
[2026-01-05T18:35:14.716Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "GlobalHelper" at position
[2026-01-05T18:35:14.716Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=true, isInClassBlock=false
[2026-01-05T18:35:14.716Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="GlobalHelper PROCEDURE()  ! Declare the global procedure so it can be called from utils.clw", match=true, inMapBlock=true
[2026-01-05T18:35:14.716Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Inside MAP block at line 83
[2026-01-05T18:35:14.716Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration regex match: YES, line="GlobalHelper PROCEDURE()  ! Declare the global procedure so it can be called from utils.clw"
[2026-01-05T18:35:14.716Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Procedure name: "GlobalHelper", range: 0-12, cursor at: 0
[2026-01-05T18:35:14.716Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Cursor is on procedure name, searching for implementation with overload resolution...
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of GlobalHelper from position 83
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 83 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 36 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE blocks in MAP
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MODULE('utils.clw') found at line 74
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 104: GlobalHelper PROCEDURE()
[2026-01-05T18:35:14.716Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for GlobalHelper at line 104
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="GlobalHelper", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=true, isAtImplementation=false
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=true
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Implementation starts at line 104
[2026-01-05T18:35:14.716Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Adding implementation preview with 8 lines

   ­ƒôï Hover at GlobalHelper MAP declaration:
   ------------------------------------------------------------
**GlobalHelper** ­ƒîì Global Procedure


**Implemented in** `main.clw` @ line 105:
```clarion
GlobalHelper PROCEDURE()


   CODE

   MESSAGE('This is a global procedure!')
   RETURN
  ! ...
```

*Press Ctrl+F12 to navigate to implementation*
   ------------------------------------------------------------

   Ô£ô Shows Global scope: Ô£à YES
   Ô£ô Shows "Implemented in": Ô£à YES
   Ô£ô Mentions Ctrl+F12: Ô£à YES
   Ô£ô Shows implementation code: Ô£à YES
   Ô£à PASS: GlobalHelper MAP hover shows implementation correctly
      Ô£ö Hover on GlobalHelper at MAP declaration (line 84)
   ­ƒôì Testing hover at implementation line 46 (0-based) = line 47 (1-based)
[2026-01-05T18:35:14.716Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 46:0 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.716Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 46:0
[2026-01-05T18:35:14.716Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "IncrementCounter" at position
[2026-01-05T18:35:14.717Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.717Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="IncrementCounter PROCEDURE", match=true, inMapBlock=false
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: IncrementCounter
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 94
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 39, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "utils.clw"
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 39, finishesAt 41
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 39 (including INCLUDEs)...
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 19 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.717Z] [MapProcedureResolver] Ôä╣´©Å INFO: No MAP declaration found for IncrementCounter
[2026-01-05T18:35:14.717Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration not found in current file, checking for MEMBER...
[2026-01-05T18:35:14.717Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Found MEMBER('main.clw'), searching parent for MAP declaration
[2026-01-05T18:35:14.717Z] [CrossFileResolver] Ôä╣´©Å INFO: Finding MAP declaration for IncrementCounter in MEMBER file main.clw
[2026-01-05T18:35:14.717Z] [CrossFileResolver] Ôä╣´©Å INFO: Resolving file: main.clw
[2026-01-05T18:35:14.717Z] [CrossFileResolver] Ôä╣´©Å INFO: Ô£à Resolved via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\main.clw
[2026-01-05T18:35:14.717Z] [CrossFileResolver] Ôä╣´©Å INFO: Searching for MAP MODULE('utils.clw') in F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\main.clw
[2026-01-05T18:35:14.719Z] [CrossFileResolver] Ôä╣´©Å INFO: Ô£à Found MODULE('utils.clw') pointing to current file
[2026-01-05T18:35:14.719Z] [CrossFileResolver] Ôä╣´©Å INFO: Found 2 overloaded declarations, using signature matching
[2026-01-05T18:35:14.719Z] [CrossFileResolver] Ôä╣´©Å INFO: Ô£à Found matching overload at line 75
[2026-01-05T18:35:14.719Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="IncrementCounter", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.719Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=false, isAtImplementation=true
[2026-01-05T18:35:14.719Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=false
[2026-01-05T18:35:14.719Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=true
[2026-01-05T18:35:14.719Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Skipping implementation preview (procImpl=true, isAtImplementation=true)

   ­ƒôï Hover at implementation:
   ------------------------------------------------------------
**IncrementCounter** ­ƒôª Module Procedure

**Declared in** `main.clw` @ line 76:
```clarion
IncrementCounter()  !can be written without parentheses
```

*Press F12 to navigate to MAP declaration*
   ------------------------------------------------------------

   Ô£ô Shows scope info: Ô£à YES
   Ô£ô Mentions F12: Ô£à YES
   Ô£ô Mentions Ctrl+F12: ÔØî NO
   Ô£ô Mentions "definition": ÔØî NO
   Ô£ô Mentions "implementation": ÔØî NO
      Ô£ö Hover on IncrementCounter at implementation (line 47 in utils.clw)
   ­ƒôì Testing hover at call site line 92 (0-based) = line 93 (1-based)
[2026-01-05T18:35:14.719Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 92:3 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.719Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 92:3
[2026-01-05T18:35:14.719Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "IncrementCounter" at position
[2026-01-05T18:35:14.719Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.719Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Detected procedure call: IncrementCounter()
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: IncrementCounter
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 165
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 73, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "main.clw"
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 73, finishesAt 84
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 73 (including INCLUDEs)...
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 36 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.719Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 75: IncrementCounter()  !can be written without parentheses
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 79: IncrementCounter  PROCEDURE()
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found 2 overloaded MAP declarations for IncrementCounter
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Implementation parameter types: []
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Declaration at line 75 parameter types: []
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found exact type match at line 75
[2026-01-05T18:35:14.720Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration found: true
[2026-01-05T18:35:14.720Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP from INCLUDE: false, mapUri: file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.720Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Looking for implementation in current document at MAP line 75
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of IncrementCounter from position 75
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 75 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 36 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE blocks in MAP
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MODULE('utils.clw') found at line 74
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found procedure IncrementCounter in MODULE block, searching external file
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: RedirectionParser.findFile('utils.clw') returned: null
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Resolved MODULE file via relative path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] ­ƒÉø DEBUG: ­ƒôû Loading source file: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒÄ» Found procedure IncrementCounter implementation at line 46
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å No enclosing MODULE found for procedure IncrementCounter
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Fast extraction failed, falling back to full tokenization
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found MAP in utils.clw, searching for procedure declaration
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Got 19 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: ÔÜá´©Å Procedure IncrementCounter not declared in MAP of utils.clw
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Searching for direct implementation in file (may be declared in parent PROGRAM's MODULE block)
[2026-01-05T18:35:14.720Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found direct implementation in file at line 46
[2026-01-05T18:35:14.721Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Implementation found in current document: true
[2026-01-05T18:35:14.721Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Final result: mapDecl=true, procImpl=true
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="IncrementCounter", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=false, isAtImplementation=false
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=false
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Implementation starts at line 46
[2026-01-05T18:35:14.721Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Adding implementation preview with 8 lines

   ­ƒôï Hover at call site:
   ------------------------------------------------------------
**IncrementCounter** ­ƒôª Module Procedure

**Declared in** `main.clw` @ line 76:
```clarion
IncrementCounter()  !can be written without parentheses
```

**Implemented in** `utils.clw` @ line 47:
```clarion
IncrementCounter PROCEDURE


  CODE
  GlobalCounter += 1    ! TEST 1: F12 here should jump to main.clw line 87
  ModuleData = 99       ! Should work - same module
  GlobalHelper()        ! TEST 6: F12 should jump to main.clw line 105 (global procedure accessible here)
  ! ...
```

*(F12 to MAP declaration | Ctrl+F12 to implementation)*
   ------------------------------------------------------------

   Ô£ô Shows scope info: Ô£à YES
   Ô£ô Mentions F12: Ô£à YES
   Ô£ô Mentions Ctrl+F12: Ô£à YES
   Ô£à CORRECT: Call site shows both F12 and Ctrl+F12 options
      Ô£ö Hover on IncrementCounter at call site (line 94 in main.clw)
   ­ƒôì Testing hover on omitted line 66 (0-based line 65)
[2026-01-05T18:35:14.721Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 65:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.721Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 65:5
[2026-01-05T18:35:14.721Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "Hover" at position
[2026-01-05T18:35:14.721Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.721Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="! - Hover over GlobalCounter ÔåÆ should show "Global from main.clw"", match=false, inMapBlock=false
[2026-01-05T18:35:14.721Z] [MethodHoverResolver] Ôä╣´©Å INFO: Checking for method declaration at line 65, char 5
[2026-01-05T18:35:14.721Z] [MethodHoverResolver] Ôä╣´©Å INFO: Total tokens at this line: 1
[2026-01-05T18:35:14.721Z] [MethodHoverResolver] Ôä╣´©Å INFO: Tokens on line 65:
[2026-01-05T18:35:14.721Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=0, subType=undefined, value="! - Hover over GlobalCounter ÔåÆ should show "Global from main.clw"", start=0, label="undefined"
[2026-01-05T18:35:14.721Z] [HoverProvider] Ôä╣´©Å INFO: No scope found - checking for global variables
[2026-01-05T18:35:14.721Z] [VariableHoverResolver] Ôä╣´©Å INFO: No scope found and no global variable found - cannot provide hover
[2026-01-05T18:35:14.721Z] [HoverProvider] Ôä╣´©Å INFO: No scope found and no global variable found - cannot provide hover
[2026-01-05T18:35:14.721Z] [HoverProvider] Ôä╣´©Å INFO: Checking if Hover is a CLASS type...
[2026-01-05T18:35:14.721Z] [HoverProvider] Ôä╣´©Å INFO: Looking up CLASS type: Hover in project: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite
[2026-01-05T18:35:14.772Z] [HoverProvider] Ôä╣´©Å INFO: No CLASS definition found for: Hover
   Ô£à CORRECT: No hover on omitted code
      Ô£ö Hover on omitted code should return null (51ms)
   ­ƒôì Testing hover on GlobalCounter at line 50 (0-based) = line 51 (1-based)
[2026-01-05T18:35:14.772Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 50:2 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.772Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 50:2
[2026-01-05T18:35:14.772Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "GlobalCounter" at position
[2026-01-05T18:35:14.772Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.772Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="  GlobalCounter += 1    ! TEST 1: F12 here should jump to main.clw line 87", match=false, inMapBlock=false
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO: Checking for method declaration at line 50, char 2
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO: Total tokens at this line: 5
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO: Tokens on line 50:
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=5, subType=undefined, value="GlobalCounter", start=2, label="undefined"
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=7, subType=undefined, value="+", start=16, label="undefined"
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=7, subType=undefined, value="=", start=17, label="undefined"
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=6, subType=undefined, value="1", start=19, label="undefined"
[2026-01-05T18:35:14.772Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=0, subType=undefined, value="! TEST 1: F12 here should jump to main.clw line 87", start=24, label="undefined"
[2026-01-05T18:35:14.772Z] [HoverProvider] Ôä╣´©Å INFO: Current scope: PROCEDURE
[2026-01-05T18:35:14.772Z] [HoverProvider] Ôä╣´©Å INFO: Checking if GlobalCounter is a parameter...
[2026-01-05T18:35:14.772Z] [HoverProvider] Ôä╣´©Å INFO: GlobalCounter is not a parameter
[2026-01-05T18:35:14.772Z] [HoverProvider] Ôä╣´©Å INFO: Checking if GlobalCounter is a local variable...
[2026-01-05T18:35:14.772Z] [VariableHoverResolver] Ôä╣´©Å INFO: findLocalVariableInfo called for word: GlobalCounter, scope: PROCEDURE at line 46
[2026-01-05T18:35:14.773Z] [VariableHoverResolver] Ôä╣´©Å INFO: Found procedure symbol: IncrementCounter ()
[2026-01-05T18:35:14.773Z] [VariableHoverResolver] Ôä╣´©Å INFO: Searching with searchText="GlobalCounter"
[2026-01-05T18:35:14.773Z] [HoverProvider] Ôä╣´©Å INFO: GlobalCounter is not a local variable
[2026-01-05T18:35:14.773Z] [HoverProvider] Ôä╣´©Å INFO: Checking for module-local variable in current file...
[2026-01-05T18:35:14.773Z] [VariableHoverResolver] Ôä╣´©Å INFO: Checking for module-local variable in current file...
[2026-01-05T18:35:14.773Z] [HoverProvider] Ôä╣´©Å INFO: GlobalCounter is not a module-local variable - checking MEMBER parent file
[2026-01-05T18:35:14.773Z] [HoverProvider] Ôä╣´©Å INFO: Found MEMBER reference to: main.clw
[2026-01-05T18:35:14.773Z] [HoverProvider] Ôä╣´©Å INFO: Resolved MEMBER path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\main.clw
[2026-01-05T18:35:14.773Z] [CrossFileCache] Ôä╣´©Å INFO: ÔØî Cache MISS for: main.clw (reading from disk)
[2026-01-05T18:35:14.773Z] [CrossFileCache] Ôä╣´©Å INFO: ­ƒôª Cached document: main.clw (cache size: 1)
[2026-01-05T18:35:14.773Z] [HoverProvider] Ôä╣´©Å INFO: Loaded parent file, found 165 tokens
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: GlobalCounter
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 165
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 73, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "main.clw"
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 73, finishesAt 84
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 73 (including INCLUDEs)...
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 36 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.773Z] [MapProcedureResolver] Ôä╣´©Å INFO: No MAP declaration found for GlobalCounter
[2026-01-05T18:35:14.773Z] [VariableHoverResolver] Ôä╣´©Å INFO: Ô£à Found global variable in current file: GlobalCounter at line 86

   ­ƒôï Hover on GlobalCounter in utils.clw:
   ------------------------------------------------------------
**GlobalCounter** ÔÇö `LONG`

­ƒîì Global variable
Declared in main.clw:87

F12 ÔåÆ Go to declaration
   ------------------------------------------------------------

   Ô£ô "Global Variable:" appears 0 time(s)
   Ô£à PASS: No duplication in hover text
   Ô£ô Shows main.clw: Ô£à YES
      Ô£ö Hover on GlobalCounter in utils.clw (line 51)
    Comprehensive Hover Tests
[2026-01-05T18:35:14.774Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 36:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.774Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 36:5
[2026-01-05T18:35:14.774Z] [HoverContextBuilder] Ôä╣´©Å INFO: No word found at position
      5) TEST 1: Hover on GlobalCounter in utils.clw line 51 (usage in procedure)
[2026-01-05T18:35:14.774Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 76:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.774Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 76:5
[2026-01-05T18:35:14.774Z] [HoverContextBuilder] Ôä╣´©Å INFO: No word found at position
      6) TEST 2: Hover on IncrementCounter at call site in main.clw line 94
[2026-01-05T18:35:14.774Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 78:25 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.774Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 78:25
[2026-01-05T18:35:14.774Z] [HoverContextBuilder] Ôä╣´©Å INFO: Line 78 is inside OMIT/COMPILE block - skipping hover
      7) TEST 3: Hover on GetCounter at call site in main.clw line 95
[2026-01-05T18:35:14.775Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 37:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 37:5
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: No word found at position
      8) TEST 4: Hover on ModuleData in utils.clw line 52 (module-local variable)
[2026-01-05T18:35:14.775Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 69:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 69:5
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: No word found at position
      9) TEST 5: Hover on GlobalHelper at MAP declaration in main.clw line 84
[2026-01-05T18:35:14.775Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 88:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 88:5
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "CODE" at position
[2026-01-05T18:35:14.775Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.775Z] [HoverRouter] Ôä╣´©Å INFO: Found built-in function: CODE
[2026-01-05T18:35:14.776Z] [HoverRouter] Ôä╣´©Å INFO: Parameter count in call: 0
      10) TEST 5b: Hover on GlobalHelper at implementation in main.clw line 105
   ­ƒôì Testing hover on GlobalHelper at line 52 (0-based) = line 53 (1-based), char 2
[2026-01-05T18:35:14.776Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 52:2 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.776Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 52:2
[2026-01-05T18:35:14.776Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "GlobalHelper" at position
[2026-01-05T18:35:14.776Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.776Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Detected procedure call: GlobalHelper()
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: GlobalHelper
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 94
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 39, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "utils.clw"
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 39, finishesAt 41
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 39 (including INCLUDEs)...
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 19 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.776Z] [MapProcedureResolver] Ôä╣´©Å INFO: No MAP declaration found for GlobalHelper
[2026-01-05T18:35:14.776Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP declaration found: false
[2026-01-05T18:35:14.776Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: Final result: mapDecl=false, procImpl=false
[2026-01-05T18:35:14.776Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="  GlobalHelper()        ! TEST 6: F12 should jump to main.clw line 105 (global procedure accessible here)", match=false, inMapBlock=false
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO: Checking for method declaration at line 52, char 2
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO: Total tokens at this line: 4
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO: Tokens on line 52:
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=4, subType=undefined, value="GlobalHelper", start=2, label="undefined"
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=19, subType=undefined, value="(", start=14, label="undefined"
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=19, subType=undefined, value=")", start=15, label="undefined"
[2026-01-05T18:35:14.776Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=0, subType=undefined, value="! TEST 6: F12 should jump to main.clw line 105 (global procedure accessible here)", start=24, label="undefined"
[2026-01-05T18:35:14.776Z] [HoverProvider] Ôä╣´©Å INFO: Current scope: PROCEDURE
[2026-01-05T18:35:14.776Z] [HoverProvider] Ôä╣´©Å INFO: Checking if GlobalHelper is a parameter...
[2026-01-05T18:35:14.776Z] [HoverProvider] Ôä╣´©Å INFO: GlobalHelper is not a parameter
[2026-01-05T18:35:14.776Z] [HoverProvider] Ôä╣´©Å INFO: Checking if GlobalHelper is a local variable...
[2026-01-05T18:35:14.777Z] [VariableHoverResolver] Ôä╣´©Å INFO: findLocalVariableInfo called for word: GlobalHelper, scope: PROCEDURE at line 46
[2026-01-05T18:35:14.777Z] [VariableHoverResolver] Ôä╣´©Å INFO: Found procedure symbol: IncrementCounter ()
[2026-01-05T18:35:14.777Z] [VariableHoverResolver] Ôä╣´©Å INFO: Searching with searchText="GlobalHelper"
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: GlobalHelper is not a local variable
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: Checking for module-local variable in current file...
[2026-01-05T18:35:14.777Z] [VariableHoverResolver] Ôä╣´©Å INFO: Checking for module-local variable in current file...
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: GlobalHelper is not a module-local variable - checking MEMBER parent file
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: Found MEMBER reference to: main.clw
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: Resolved MEMBER path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\main.clw
[2026-01-05T18:35:14.777Z] [CrossFileCache] Ôä╣´©Å INFO: ÔØî Cache MISS for: main.clw (reading from disk)
[2026-01-05T18:35:14.777Z] [CrossFileCache] Ôä╣´©Å INFO: ­ƒôª Cached document: main.clw (cache size: 1)
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: Loaded parent file, found 165 tokens
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for MAP declaration for procedure: GlobalHelper
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôè Total tokens in document: 165
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒöì Found 1 token(s) with value 'MAP' (any type)
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP token #1: line 73, type=16, subType=16, value="MAP"
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 1 MAP structure(s) in document "main.clw"
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MAP #1: line 73, finishesAt 84
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒù║´©Å Searching MAP at line 73 (including INCLUDEs)...
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: ­ƒôï Found 36 total tokens in MAP (with INCLUDEs)
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Ô£à Found MAP declaration candidate at line 83: GlobalHelper PROCEDURE()  ! Declare the global procedure so it can be called from utils.clw
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single MAP declaration for GlobalHelper at line 83
[2026-01-05T18:35:14.777Z] [HoverProvider] Ôä╣´©Å INFO: Ô£à Found MAP declaration for GlobalHelper in parent - treating as procedure call
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Looking for implementation of GlobalHelper from position 83
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Checking if position 83 is inside PROCEDURE/PROGRAM block. Found 0 blocks containing this position
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO:    ­ƒôï Got 36 tokens from MAP (including INCLUDEs)
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO:    Found 1 MODULE blocks in MAP
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO:    MODULE('utils.clw') found at line 74
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO:    No MODULE reference found for procedure, searching current file
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found implementation candidate at line 104: GlobalHelper PROCEDURE()
[2026-01-05T18:35:14.777Z] [MapProcedureResolver] Ôä╣´©Å INFO: Found single implementation for GlobalHelper at line 104
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: procName="GlobalHelper", hasMapDecl=true, hasProcImpl=true
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: isAtMapDeclaration=false, isAtImplementation=false
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check MAP declaration, mapDecl=true, isAtMapDeclaration=false
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: About to check implementation, procImpl=true, isAtImplementation=false
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Reading implementation from F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Implementation starts at line 104
[2026-01-05T18:35:14.777Z] [HoverFormatter] Ôä╣´©Å INFO: formatProcedure: Adding implementation preview with 8 lines

   ­ƒôï Hover on GlobalHelper call:
   ------------------------------------------------------------
**GlobalHelper** ­ƒîì Global Procedure

**Declared in** `main.clw` @ line 84:
```clarion
GlobalHelper PROCEDURE()  ! Declare the global procedure so it can be called from utils.clw
```

**Implemented in** `main.clw` @ line 105:
```clarion
GlobalHelper PROCEDURE()


   CODE

   MESSAGE('This is a global procedure!')
   RETURN
  ! ...
```

*(F12 to MAP declaration | Ctrl+F12 to implementation)*
   ------------------------------------------------------------

      Ô£ö TEST 6: Hover on GlobalHelper call in utils.clw line 53
[2026-01-05T18:35:14.778Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 61:10 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.778Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 61:10
[2026-01-05T18:35:14.778Z] [HoverContextBuilder] Ôä╣´©Å INFO: Found word: "PASSING:" at position
[2026-01-05T18:35:14.778Z] [HoverContextBuilder] Ôä╣´©Å INFO: Context: hasLabelBefore=false, isInWindowContext=false, isInMapBlock=false, isInClassBlock=false
[2026-01-05T18:35:14.778Z] [ProcedureHoverResolver] Ôä╣´©Å INFO: MAP procedure regex test: line="! - Ô£à PASSING: Scope validation blocks cross-file access to module-local vars", match=false, inMapBlock=false
[2026-01-05T18:35:14.778Z] [MethodHoverResolver] Ôä╣´©Å INFO: Checking for method declaration at line 61, char 10
[2026-01-05T18:35:14.778Z] [MethodHoverResolver] Ôä╣´©Å INFO: Total tokens at this line: 1
[2026-01-05T18:35:14.778Z] [MethodHoverResolver] Ôä╣´©Å INFO: Tokens on line 61:
[2026-01-05T18:35:14.778Z] [MethodHoverResolver] Ôä╣´©Å INFO:   - type=0, subType=undefined, value="! - Ô£à PASSING: Scope validation blocks cross-file access to module-local vars", start=0, label="undefined"
[2026-01-05T18:35:14.778Z] [HoverProvider] Ôä╣´©Å INFO: No scope found - checking for global variables
[2026-01-05T18:35:14.778Z] [VariableHoverResolver] Ôä╣´©Å INFO: No scope found and no global variable found - cannot provide hover
[2026-01-05T18:35:14.778Z] [HoverProvider] Ôä╣´©Å INFO: No scope found and no global variable found - cannot provide hover
[2026-01-05T18:35:14.778Z] [HoverProvider] Ôä╣´©Å INFO: Checking if PASSING: is a CLASS type...
[2026-01-05T18:35:14.778Z] [HoverProvider] Ôä╣´©Å INFO: Looking up CLASS type: PASSING: in project: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite
[2026-01-05T18:35:14.823Z] [HoverProvider] Ôä╣´©Å INFO: No CLASS definition found for: PASSING:
      11) Hover on IncrementCounter at MAP declaration in main.clw line 76
[2026-01-05T18:35:14.823Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 34:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/utils.clw
[2026-01-05T18:35:14.823Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 34:5
[2026-01-05T18:35:14.824Z] [HoverContextBuilder] Ôä╣´©Å INFO: No word found at position
      12) Hover on IncrementCounter at implementation in utils.clw line 47
[2026-01-05T18:35:14.824Z] [HoverProvider] Ôä╣´©Å INFO: Providing hover for position 72:5 in file:///F:/github/Clarion-Extension/Clarion-Extension/test-programs/RealWorldTestSuite/main.clw
[2026-01-05T18:35:14.824Z] [HoverContextBuilder] Ôä╣´©Å INFO: Building hover context for position 72:5
[2026-01-05T18:35:14.824Z] [HoverContextBuilder] Ôä╣´©Å INFO: No word found at position
      13) Hover on GlobalCounter at declaration in main.clw line 87
    Diagnostic: Solution Structure

­ƒôè Solution Structure Report:
   Solution: RealWorldTestSuite
   Path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\RealWorldTestSuite.sln
   Projects: 1

   ­ƒôª Project: CrossFileScope
      Type: {12B76EC0-1D7B-4FA7-A7D0-C524288B48A1}
      Path: F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite
      GUID: {8B8D458E-C672-4EA6-B6DC-B9645FAE5E5B}
      Source Files: 3
         Ô£à main.clw
            ÔåÆ F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\main.clw
         Ô£à utils.clw
            ÔåÆ F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\utils.clw
         Ô£à StartProc.clw
            ÔåÆ F:\github\Clarion-Extension\Clarion-Extension\test-programs\RealWorldTestSuite\StartProc.clw
      Ô£ö Should report solution structure
­ƒº╣ Cleaning up solution-based tests...

  Structure Lifecycle Tests
    Ô£ö MAP structure should have finishesAt set correctly
    Ô£ö PROCEDURE inside MAP should be child of MAP
    Ô£ö PROCEDURE after MAP END should not be child of MAP
    14) All structure types should have finishesAt set with proper END
    Ô£ö Nested structures should all have finishesAt set

=== DEBUG: IF Token Details ===
IF token type: Structure
IF token subType: Structure
IF token finishesAt: 5
IF token line: 3
    Ô£ö IF structure with standalone dot on separate line should close structure

  Structure Parent Relationships
    Ô£ö GROUP...END should have parent relationship
    Ô£ö VIEW...END should have parent relationship
    Ô£ö QUEUE...END should have parent relationship
    Ô£ö QUEUE without label prefix should have parent relationship
    Ô£ö WINDOW...END should have parent relationship
    Ô£ö WINDOW with SHEET and TAB should have proper nesting
    Ô£ö WINDOW with line continuation should work

  TokenHelper Tests
    getWordRangeAtPosition
      Ô£ö Should extract word with colon prefix - LOC:Field
      Ô£ö Should extract Clarion prefix notation - Cust:Name
      Ô£ö Should handle dot notation - cursor on prefix (MyGroup.MyField)
      Ô£ö Should handle dot notation - cursor on field (MyGroup.MyField)
      Ô£ö Should handle self.Method() notation
      Ô£ö Should handle simple identifier without prefix
      Ô£ö Should handle multiple colons - File:Record:Field
      Ô£ö Should return null for empty position
      Ô£ö Should handle cursor at start of word
      Ô£ö Should handle cursor at end of word
    getInnermostScopeAtLine
      Ô£ö Should find procedure scope
      Ô£ö Should find routine scope within procedure
      Ô£ö Should return undefined for line outside any scope
      Ô£ö Should not return MethodDeclaration from CLASS data section
    getParentScopeOfRoutine
      Ô£ö Should find parent procedure of routine
      Ô£ö Should return undefined for routine with no parent

  Tokenizer - Keyword in Field Qualifier Bug
Testing code:

   if GlobalResponse=RequestCancelled
         nts:case      = hold:nts:case
         nts:notes       = hold:nts:notes
   else hold:nts:case = nts:case
         hold:nts:notes  = nts:notes
         lcl:Preset_NTS  = TRUE
         lcl:Empty_Notes = CHOOSE( LEN(CLIP(NTS:Notes)) = 0 )
   end


=== TOKENS ===
Token 0: type=5, value="f", line=1, col=undefined
Token 1: type=5, value="GlobalResponse", line=1, col=undefined
Token 2: type=7, value="=", line=1, col=undefined
Token 3: type=5, value="RequestCancelled", line=1, col=undefined
Token 4: type=35, value="nts:case", line=2, col=undefined
Token 5: type=7, value="=", line=2, col=undefined
Token 6: type=35, value="hold:nts", line=2, col=undefined
Token 7: type=19, value=":", line=2, col=undefined
Token 8: type=5, value="ase", line=2, col=undefined
Token 9: type=35, value="nts:notes", line=3, col=undefined
Token 10: type=7, value="=", line=3, col=undefined
Token 11: type=35, value="hold:nts", line=3, col=undefined
Token 12: type=19, value=":", line=3, col=undefined
Token 13: type=5, value="notes", line=3, col=undefined
Token 14: type=32, value="else", line=4, col=undefined
Token 15: type=35, value="hold:nts", line=4, col=undefined
Token 16: type=19, value=":", line=4, col=undefined
Token 17: type=5, value="ase", line=4, col=undefined
Token 18: type=7, value="=", line=4, col=undefined
Token 19: type=35, value="nts:case", line=4, col=undefined
Token 20: type=35, value="hold:nts", line=5, col=undefined
Token 21: type=19, value=":", line=5, col=undefined
Token 22: type=5, value="notes", line=5, col=undefined
Token 23: type=7, value="=", line=5, col=undefined
Token 24: type=35, value="nts:notes", line=5, col=undefined
Token 25: type=35, value="lcl:Preset_NTS", line=6, col=undefined
Token 26: type=7, value="=", line=6, col=undefined
Token 27: type=11, value="TRUE", line=6, col=undefined
Token 28: type=35, value="lcl:Empty_Notes", line=7, col=undefined
Token 29: type=7, value="=", line=7, col=undefined
Token 30: type=4, value="CHOOSE", line=7, col=undefined
Token 31: type=19, value="(", line=7, col=undefined
Token 32: type=4, value="LEN", line=7, col=undefined
Token 33: type=19, value="(", line=7, col=undefined
Token 34: type=4, value="CLIP", line=7, col=undefined
Token 35: type=19, value="(", line=7, col=undefined
Token 36: type=35, value="NTS:Notes", line=7, col=undefined
Token 37: type=19, value=")", line=7, col=undefined
Token 38: type=19, value=")", line=7, col=undefined
Token 39: type=7, value="=", line=7, col=undefined
Token 40: type=6, value="0", line=7, col=undefined
Token 41: type=19, value=")", line=7, col=undefined
Token 42: type=26, value="end", line=8, col=undefined

Found 0 CASE keyword tokens:
    Ô£ö should NOT treat keywords after colon as statement keywords
Testing class property code:

MyClass                 CLASS
case                       LONG
record                     LONG
if                         LONG
                        END

TestProc                PROCEDURE
obj                        &MyClass
    CODE
    obj &= NEW MyClass
    obj.case = 123
    obj.record = 456
    obj.if = 789
    RETURN


=== TOKENS ===
Token 4: type=25, subType=undefined, value="record", line=3, col=undefined
Token 18: type=34, subType=undefined, value="obj.case", line=11, col=undefined
Token 21: type=34, subType=undefined, value="obj.record", line=12, col=undefined
Token 24: type=34, subType=undefined, value="obj.if", line=13, col=undefined

Found 0 keyword tokens after class definition:
    Ô£ö should NOT treat keywords after period as statement keywords (class properties)

  Unlabeled GROUP Nesting
    - should correctly nest fields under unlabeled GROUP structure - DISABLED
    Ô£ö should handle multiple unlabeled GROUPs in the same method

  UnreachableCodeProvider Tests
    Ô£ö Simple top-level RETURN marks following code as unreachable

=== DEBUG: User Case - Nested IF with RETURN ===
Code with line numbers:
  0: CBCodeParseClass.FindCommaOrParen   PROCEDURE(STRING CodeTxt, <*STRING OutCharFound>)!,LONG
  1: Comma1    LONG    
  2: Paren1    LONG 
  3:     CODE
  4:     Comma1=INSTRING(',',CodeTxt,1)       !LINE,AT(0
  5:     Paren1=INSTRING('(',CodeTxt,1)       !STRING(@D1),
  6:     IF Paren1 AND Paren1 < Comma1 THEN 
  7:        Comma1 = Paren1
  8:        
  9:     END
  10:     IF ~OMITTED(OutCharFound) THEN
  11:        OutCharFound = SUB(Codetxt,Comma1,1)
  12:        return
  13:        a=1
  14:     END
  15:     RETURN Comma1
  16: 

PROCEDURE tokens:
  Line 4: 'Unreachable' (finishesAt: undefined)

IF structure tokens:

RETURN tokens:
  Line 3: RETURN (type: 2)

Unreachable ranges:
  Line 4: "Comma1=INSTRING(',',CodeTxt,1)       !LINE,AT(0"

Expected behavior (Phase 1):
  Line 13 (return) - conditional, inside IF at line 11
  Line 14 (a=1) - Technically unreachable, but Phase 1 does NOT track within structures
  Line 16 (RETURN Comma1) - top-level, marks nothing (at procedure end)
  Phase 1: Conservative detection, only top-level terminators

Line 14 marked unreachable: false
Phase 1 limitation: Does not analyze unreachable code within IF/LOOP blocks
Line 16 marked unreachable: false (should be false)
    Ô£ö DEBUG: User case - nested IF with RETURN

=== DEBUG: Tokenizer Output ===
Code with line numbers:
  0: "StateCalc:Kill PROCEDURE"
  1: "StateCalc:Kill_Called    BYTE,STATIC"
  2: "  CODE"
  3: "  IF StateCalc:Kill_Called"
  4: "     RETURN"
  5: "  ELSE"
  6: "     StateCalc:Kill_Called = True"
  7: "  END"
  8: "  IBSCOMMON:Kill()"
  9: ""

PROCEDURE tokens:
  Line 4: 'Unreachable' (finishesAt: undefined)

ALL TOKENS:
  [0] Line 1: "MyProc" (type: 25, subType: undefined, finishesAt: undefined)
  [1] Line 1: "PROCEDURE" (type: 28, subType: 36, finishesAt: 4)
  [2] Line 1: "(" (type: 19, subType: undefined, finishesAt: undefined)
  [3] Line 1: ")" (type: 19, subType: undefined, finishesAt: undefined)
  [4] Line 2: "CODE" (type: 30, subType: undefined, finishesAt: undefined)
  [5] Line 3: "RETURN" (type: 2, subType: undefined, finishesAt: undefined)
  [6] Line 4: "MESSAGE" (type: 4, subType: undefined, finishesAt: undefined)
  [7] Line 4: "(" (type: 19, subType: undefined, finishesAt: undefined)
  [8] Line 4: "'Unreachable'" (type: 1, subType: undefined, finishesAt: undefined)
  [9] Line 4: ")" (type: 19, subType: undefined, finishesAt: undefined)

IF structure tokens (value=IF):

RETURN tokens:
  Line 3: RETURN (type: 2)

Unreachable ranges: [ 'Line 4' ]
    Ô£ö DEBUG: Check tokenizer output for IF...ELSE...END structure

=== Test: Conditional RETURN in IF (no ELSE) ===
Unreachable ranges: [ 'Line 4' ]
    Ô£ö Conditional RETURN in IF...THEN (no ELSE) does NOT mark code after END as unreachable

=== Test: RETURN in both IF and ELSE ===
Unreachable ranges: [ 'Line 4' ]
NOTE: Line 8 NOT marked unreachable
This is expected in Phase 1 - we do not track all branches
Phase 1 only detects unconditional top-level terminators
    Ô£ö RETURN in both IF and ELSE branches SHOULD mark code after END as unreachable

=== Test: Nested IF with RETURN ===
Unreachable ranges: [ 'Line 4' ]
    Ô£ö RETURN inside nested IF should NOT mark outer code as unreachable

=== Test: RETURN inside LOOP ===
Unreachable ranges: [ 'Line 4' ]
    Ô£ö RETURN inside LOOP does NOT mark code after LOOP as unreachable

=== Test: ROUTINE resets unreachable ===
Unreachable ranges: []
    Ô£ö ROUTINE blocks reset unreachable state
    Ô£ö Empty document should return no unreachable ranges
    Ô£ö Procedure without CODE marker should return no unreachable ranges
    15) Comprehensive test: All control structures and semantics

  Variable Type Extraction Tests

=== Variable Type Extraction Test ===
Found method: StringTheory.Base64Encode ( *string pText , *long pLen )
Variable 'x': expected='long', actual='long'
Variable 'y': expected='long', actual='long'
Variable 'z': expected='long(1)', actual='long(1)'
Variable 'a': expected='long', actual='long'
Variable 'b': expected='long', actual='long'
Variable 'sz': expected='long', actual='long'
Variable 'triplet': expected='string(4)', actual='string(4)'
Variable 'bits': expected='long', actual='long'
Variable 'table': expected='string('ABCDEFGHIJ...)', actual='string('ABCDEFGHIJ...)'
Variable 'expectLen': expected='long', actual='long'
    Ô£ö Variable type extraction - long with auto attribute

=== Attribute Position Test ===
Variable 'var1': expected='long', actual='long'
Variable 'var2': expected='long', actual='long'
Variable 'var3': expected='string(20)', actual='string(20)'
Variable 'var4': expected='string('hello')', actual='string('hello')'
Variable 'var5': expected='long', actual='long'
Variable 'var6': expected='long', actual='long'
Variable 'var7': expected='byte', actual='byte'
Variable 'var8': expected='real', actual='real'
    Ô£ö Variable type extraction - various attribute positions

=== Group Without Label Test ===
Found group: GROUP,OVER(bits)
    Ô£ö Variable type extraction - group without label


  447 passing (463ms)
  21 pending
  15 failing

  1) DefinitionProvider Behavior Tests
       Scope-Aware Definition Tests
         Should isolate variables in different procedures:

      AssertionError [ERR_ASSERTION]: Should NOT go to Proc1 LocalVar (line 7)
      + expected - actual


      at Context.<anonymous> (out\server\src\test\DefinitionProvider.test.js:693:20)

  2) HoverProvider - DocumentStructure API Integration
       MAP procedure hover (declaration ÔåÆ implementation)
         should show implementation hover when hovering on MAP declaration:

      AssertionError [ERR_ASSERTION]: Should show implementation info
      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (out\server\src\test\HoverProvider.Refactor.test.js:45:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  3) MODULE Structure Tests
       MODULE in CLASS attribute list should NOT be a structure:
     AssertionError [ERR_ASSERTION]: Should find MODULE token
      at Context.<anonymous> (out\server\src\test\ModuleStructure.test.js:16:16)
      at process.processImmediate (node:internal/timers:504:21)

  4) MODULE Structure Tests
       MODULE in CLASS attribute should NOT have parent:
     AssertionError [ERR_ASSERTION]: Should find MODULE token
      at Context.<anonymous> (out\server\src\test\ModuleStructure.test.js:33:16)
      at process.processImmediate (node:internal/timers:504:21)

  5) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         TEST 1: Hover on GlobalCounter in utils.clw line 51 (usage in procedure):
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:559:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  6) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         TEST 2: Hover on IncrementCounter at call site in main.clw line 94:
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:575:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  7) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         TEST 3: Hover on GetCounter at call site in main.clw line 95:
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:593:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  8) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         TEST 4: Hover on ModuleData in utils.clw line 52 (module-local variable):
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:608:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  9) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         TEST 5: Hover on GlobalHelper at MAP declaration in main.clw line 84:
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:623:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  10) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         TEST 5b: Hover on GlobalHelper at implementation in main.clw line 105:

      AssertionError [ERR_ASSERTION]: Should show procedure name
      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:641:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  11) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         Hover on IncrementCounter at MAP declaration in main.clw line 76:
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:684:20)

  12) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         Hover on IncrementCounter at implementation in utils.clw line 47:
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:701:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  13) Solution-Based Cross-File Scope Tests
       Comprehensive Hover Tests
         Hover on GlobalCounter at declaration in main.clw line 87:
     AssertionError [ERR_ASSERTION]: Should have hover
      at Context.<anonymous> (out\server\src\test\SolutionBased.CrossFileScope.test.js:718:20)
      at process.processTicksAndRejections (node:internal/process/task_queues:103:5)

  14) Structure Lifecycle Tests
       All structure types should have finishesAt set with proper END:
     AssertionError [ERR_ASSERTION]: Should find INTERFACE token
      at Context.<anonymous> (out\server\src\test\StructureLifecycle.test.js:72:20)
      at process.processImmediate (node:internal/timers:504:21)

  15) UnreachableCodeProvider Tests
       Comprehensive test: All control structures and semantics:
     AssertionError [ERR_ASSERTION]: Missing unreachable detections:
  Line 16: a = 2                     ! unreachable (after top-level RETURN) works (x)
  Line 24: b = 2                   ! unreachable (after RETURN in IF branch)
  Line 35: c = 2                   ! unreachable (after RETURN in ELSIF branch)
  Line 47: d = 2                   ! unreachable (after RETURN inside LOOP)
  Line 49: d = 3                     ! unreachable (procedure terminated by LOOP RETURN)
  Line 58: e = 2                   ! unreachable (after RETURN in CASE branch)
  Line 72: f = 2                   ! unreachable (after RETURN in EXECUTE branch)  (x)
  Line 82: g = 2                   ! unreachable (after RETURN in ROUTINE)
  Line 87: g = 4                     ! unreachable (after final RETURN)  (x)
      at Context.<anonymous> (out\server\src\test\UnreachableCodeProvider.test.js:359:20)
      at process.processImmediate (node:internal/timers:504:21)



